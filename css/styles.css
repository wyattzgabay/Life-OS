/**
 * STYLES.CSS
 * All app styles in one place
 * Organized by section for easy maintenance
 */

/* ==========================================
   CSS VARIABLES
   ========================================== */

:root {
    /* ═══════════════════════════════════════════
       MIDNIGHT GOLD - Life OS Brand Identity
       Premium dark theme with gold accents
       ═══════════════════════════════════════════ */
    
    /* Background Layers */
    --bg: #050505;
    --surface: #0c0c0c;
    --surface-2: #141414;
    --surface-3: #1c1c1c;
    --surface-elevated: #1a1a1a;
    --border: #262626;
    --border-light: #333333;
    
    /* Typography */
    --text: #fafafa;
    --text-2: #e5e5e5;
    --text-muted: #737373;
    --text-dim: #525252;
    
    /* Primary - Midnight Gold */
    --accent: #D4AF37;
    --accent-glow: rgba(212, 175, 55, 0.15);
    --accent-light: #E8C547;
    --accent-dark: #B8960C;
    --accent-muted: rgba(212, 175, 55, 0.6);
    
    /* Status Colors */
    --success: #10b981;
    --success-muted: rgba(16, 185, 129, 0.15);
    --warning: #f59e0b;
    --warning-muted: rgba(245, 158, 11, 0.15);
    --error: #ef4444;
    --error-muted: rgba(239, 68, 68, 0.15);
    --info: #3b82f6;
    
    /* Button States */
    --btn-primary-bg: var(--accent);
    --btn-primary-text: #0a0a0a;
    --btn-secondary-bg: var(--surface-2);
    --btn-secondary-text: var(--text);
    --btn-ghost-bg: transparent;
    --btn-ghost-text: var(--text-muted);
    
    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.5);
    --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.6);
    --shadow-gold: 0 4px 20px rgba(212, 175, 55, 0.2);
    
    /* Gradients */
    --gradient-gold: linear-gradient(135deg, var(--accent) 0%, var(--accent-dark) 100%);
    --gradient-surface: linear-gradient(180deg, var(--surface-2) 0%, var(--surface) 100%);
    
    /* Radius */
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    
    /* Safe Areas */
    --safe-top: env(safe-area-inset-top);
    --safe-bottom: env(safe-area-inset-bottom);
}

/* ==========================================
   MIDNIGHT COUNTDOWN BANNER
   ========================================== */

.midnight-countdown {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 9999;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-bottom: 2px solid #fbbf24;
    padding: 12px 16px;
    padding-top: calc(12px + var(--safe-top));
    transform: translateY(-100%);
    transition: transform 0.3s ease;
}

.midnight-countdown.visible {
    transform: translateY(0);
}

.countdown-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    max-width: 400px;
    margin: 0 auto;
}

.countdown-icon {
    font-size: 18px;
    animation: pulse 1s infinite;
}

.countdown-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    color: #fbbf24;
}

.countdown-text strong {
    font-size: 18px;
    color: #fff;
    margin-left: 4px;
}

.countdown-hint {
    font-size: 11px;
    color: rgba(251, 191, 36, 0.7);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

/* ==========================================
   RESET & BASE
   ========================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    color-scheme: dark;
}

/* Force dark keyboard on iOS */
input, textarea, select {
    color-scheme: dark;
}

html, body {
    height: 100%;
    overflow: hidden; /* Body doesn't scroll - views do */
}

/* Main content wrapper for scrolling */
#main-app {
    height: 100%;
    overflow: hidden;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: var(--text);
    height: 100%;
    overflow: hidden;
    -webkit-font-smoothing: antialiased;
}

/* ==========================================
   UTILITIES
   ========================================== */

.hidden { display: none !important; }
.mono { font-family: 'JetBrains Mono', monospace; }

/* ==========================================
   TACTILE BUTTON SYSTEM
   Apple-inspired with depth and feedback
   ========================================== */

/* Base Button Reset */
button, .btn {
    font-family: inherit;
    cursor: pointer;
    border: none;
    outline: none;
    transition: all 0.15s ease;
    -webkit-tap-highlight-color: transparent;
}

/* Primary Button - Gold, ONLY for main save/submit actions */
.btn-primary {
    background: var(--gradient-gold);
    color: var(--bg);
    font-weight: 600;
    padding: 14px 24px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-size: 13px;
}

.btn-primary:active {
    transform: scale(0.98);
    filter: brightness(0.95);
}

/* Secondary Button - Surface color, subtle */
.btn-secondary {
    background: var(--surface-2);
    color: var(--text);
    font-weight: 500;
    padding: 12px 20px;
    border-radius: var(--radius-md);
    border: 1px solid var(--border);
    box-shadow: var(--shadow-sm), inset 0 1px 0 rgba(255,255,255,0.03);
}

.btn-secondary:hover {
    background: var(--surface-3);
    border-color: var(--border-light);
}

.btn-secondary:active {
    transform: scale(0.98);
    background: var(--surface);
}

/* Ghost Button - Minimal, text-like */
.btn-ghost {
    background: transparent;
    color: var(--text-muted);
    padding: 10px 16px;
    border-radius: var(--radius-sm);
}

.btn-ghost:hover {
    background: var(--surface-2);
    color: var(--text);
}

.btn-ghost:active {
    background: var(--surface);
}

/* Chip/Toggle Buttons - Clean minimal style */
.wt-btn, .pain-chip, .region-btn, .subregion-btn, .timing-btn {
    background: transparent;
    color: var(--text-muted);
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    border: 1px solid var(--border);
    transition: all 0.15s ease;
}

.wt-btn:active, .pain-chip:active {
    transform: scale(0.97);
}

/* Active state - subtle white fill */
.wt-btn.active,
.pain-chip.selected,
.region-btn.selected,
.subregion-btn.selected,
.timing-btn.selected {
    background: var(--text);
    color: var(--bg);
    border-color: var(--text);
    font-weight: 600;
}

/* Effort buttons removed - using slider instead */
.eff-btn {
    display: none;
}

/* Status Buttons */
.btn-success {
    background: var(--success);
    color: white;
}

.btn-warning {
    background: var(--warning);
    color: var(--bg);
}

.btn-danger {
    background: var(--error);
    color: white;
}

/* ==========================================
   SCREENS & VIEWS
   ========================================== */

.screen {
    min-height: 100vh;
    padding: 20px;
    padding-top: calc(20px + var(--safe-top));
}

.view {
    display: none;
    padding: 0 16px 20px;
    animation: fadeIn 0.2s ease;
    overflow-x: hidden;
    overflow-y: auto;
    height: calc(100vh - 70px - var(--safe-bottom)); /* Full height minus tab bar */
    -webkit-overflow-scrolling: touch; /* iOS momentum scrolling */
    overscroll-behavior-y: auto; /* Enable bouncy scroll */
}

.view.active {
    display: block;
}

@media (max-width: 380px) {
    .view {
        padding: 0 12px 20px;
    }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* ==========================================
   HEADER
   ========================================== */

.header {
    padding: calc(16px + var(--safe-top)) 0 16px;
    position: sticky;
    top: 0;
    background: var(--bg);
    z-index: 10;
}

.header-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.date-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
    letter-spacing: 0.2em;
    margin-bottom: 4px;
}

.date-full {
    font-size: 26px;
    font-weight: 700;
}

.xp-display {
    text-align: right;
}

.xp-row {
    display: flex;
    align-items: center;
    gap: 8px;
    justify-content: flex-end;
}

.xp-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    line-height: 1;
}

.xp-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.2em;
}

.streak-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 700;
    background: var(--success);
    color: var(--bg);
    padding: 2px 6px;
    border-radius: 4px;
}

/* Level Bar */
.level-container {
    background: var(--surface);
    border-radius: 12px;
    padding: 14px 16px;
}

.level-info {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}

.level-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 700;
    background: var(--accent);
    color: var(--bg);
    padding: 4px 8px;
    border-radius: 4px;
    letter-spacing: 0.05em;
}

.level-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
    letter-spacing: 0.15em;
}

.level-bar {
    height: 3px;
    background: var(--surface-3);
    border-radius: 2px;
    overflow: hidden;
}

.level-fill {
    height: 100%;
    background: var(--text);
    border-radius: 2px;
    transition: width 0.5s ease;
}

.level-xp-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-dim);
    margin-top: 8px;
    text-align: right;
}

/* ==========================================
   ACCOUNTABILITY
   ========================================== */

.accountability-card {
    background: var(--surface);
    border-radius: 10px;
    padding: 12px 16px;
    margin-bottom: 12px;
}

.acc-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.acc-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
}

.acc-score {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 700;
}

.acc-bar {
    height: 4px;
    background: var(--surface-3);
    border-radius: 2px;
    overflow: hidden;
}

.acc-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.5s ease, background 0.3s;
}

.acc-fill.good { background: var(--success); }
.acc-fill.warning { background: var(--warning); }
.acc-fill.danger { background: var(--error); }

/* Debt Section */
.debt-section {
    background: var(--surface);
    border: 1px solid var(--error);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 12px;
}

.debt-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--error);
    letter-spacing: 0.1em;
    margin-bottom: 10px;
}

.debt-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 0;
    border-bottom: 1px solid var(--border);
}

.debt-item:last-child { border-bottom: none; }

.debt-type {
    font-size: 13px;
    font-weight: 500;
}

.debt-date {
    font-size: 11px;
    color: var(--text-muted);
}

.debt-clear-btn {
    background: var(--surface-2);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 6px 12px;
    border-radius: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    cursor: pointer;
}

/* ==========================================
   INSIGHT CARD
   ========================================== */

.insight-card {
    background: var(--surface);
    border-left: 2px solid var(--text);
    border-radius: 0 10px 10px 0;
    padding: 14px 16px;
    margin-bottom: 16px;
}

.insight-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-dim);
    letter-spacing: 0.15em;
    margin-bottom: 6px;
}

.insight-text {
    font-size: 13px;
    line-height: 1.5;
    color: var(--text-2);
}

/* ==========================================
   SECTIONS
   ========================================== */

.section {
    margin-bottom: 24px;
}

.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.section-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    color: var(--text-dim);
    letter-spacing: 0.12em;
    text-transform: uppercase;
}

.section-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--accent);
    background: var(--surface-2);
    border: 1px solid var(--accent);
    padding: 4px 10px;
    border-radius: 4px;
    letter-spacing: 0.05em;
}

.section-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

/* ==========================================
   WORKOUT LIST
   ========================================== */

.workout-list {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
}

.workout-item {
    display: flex;
    align-items: center;
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    transition: background 0.1s;
}

.workout-item:last-child { border-bottom: none; }
.workout-item:active { background: var(--surface-2); }
.workout-item.completed { opacity: 0.4; }

.workout-check {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border);
    border-radius: 5px;
    margin-right: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    flex-shrink: 0;
}

.workout-item.completed .workout-check {
    background: var(--success);
    border-color: var(--success);
}

.workout-check svg {
    width: 12px;
    height: 12px;
    stroke: var(--bg);
    stroke-width: 3;
    opacity: 0;
}

.workout-item.completed .workout-check svg { opacity: 1; }

.workout-info { flex: 1; }

.workout-name {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 2px;
}

.workout-detail {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
}

.workout-xp {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
}

.workout-item.lift-item {
    cursor: pointer;
}

.workout-item.lift-item:active {
    background: var(--surface-2);
}

.last-lift {
    display: inline-block;
    background: var(--surface-3);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
    margin-left: 8px;
}

.workout-log-btn {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--text);
    background: var(--surface-2);
    padding: 6px 10px;
    border-radius: 6px;
}

.workout-item.completed .workout-log-btn {
    background: var(--success);
    color: var(--bg);
}

/* Partial completion state */
.workout-item.partial {
    opacity: 0.85;
    border-left: 3px solid #fbbf24;
}

.workout-item.partial .workout-check {
    background: rgba(251, 191, 36, 0.2);
    border-color: #fbbf24;
}

.workout-log-btn.status-partial {
    background: rgba(251, 191, 36, 0.2);
    border: 1px solid #fbbf24;
    color: #fbbf24;
    font-weight: 600;
}

.workout-log-btn.status-complete {
    background: var(--success);
    color: var(--bg);
    font-weight: 600;
}

/* Posture exercise styles */
.workout-item.posture-item {
    border-left: 3px solid var(--text-muted);
}

.posture-badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.1em;
    padding: 2px 6px;
    background: rgba(115, 115, 115, 0.2);
    border: 1px solid rgba(115, 115, 115, 0.3);
    border-radius: 4px;
    color: var(--text-muted);
    margin-left: 8px;
    vertical-align: middle;
}

.swapped-badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.05em;
    padding: 2px 6px;
    background: rgba(59, 130, 246, 0.15);
    border: 1px solid rgba(59, 130, 246, 0.3);
    border-radius: 4px;
    color: #60a5fa;
    margin-left: 8px;
    vertical-align: middle;
}

.workout-item.swapped {
    border-left: 3px solid #60a5fa;
}

/* Volume adjustment indicators */
.volume-adj {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 8px;
    vertical-align: middle;
}

.volume-adj.reduce {
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: #ef4444;
}

.volume-adj.increase {
    background: rgba(34, 197, 94, 0.15);
    border: 1px solid rgba(34, 197, 94, 0.3);
    color: #22c55e;
}

.deload-badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 0.05em;
    padding: 2px 6px;
    background: rgba(251, 191, 36, 0.15);
    border: 1px solid rgba(251, 191, 36, 0.3);
    border-radius: 4px;
    color: #fbbf24;
    margin-left: 8px;
    vertical-align: middle;
}

/* Workout adjustment banner */
.workout-adjustment {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border-radius: 8px;
    margin-bottom: 12px;
    font-size: 11px;
    font-family: 'JetBrains Mono', monospace;
}

.workout-adjustment.volume {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.25);
    color: #60a5fa;
}

.workout-adjustment.deload {
    background: rgba(251, 191, 36, 0.1);
    border: 1px solid rgba(251, 191, 36, 0.25);
    color: #fbbf24;
}

.adjustment-icon {
    font-size: 14px;
    font-weight: bold;
}

.adjustment-text {
    flex: 1;
}

.workout-alert {
    padding: 8px 12px;
    border-radius: 6px;
    margin-bottom: 8px;
    font-size: 11px;
    font-family: 'JetBrains Mono', monospace;
}

.workout-alert.warning {
    background: rgba(251, 191, 36, 0.1);
    border-left: 3px solid #fbbf24;
    color: #fbbf24;
}

.workout-alert.info {
    background: rgba(107, 114, 128, 0.1);
    border-left: 3px solid #6b7280;
    color: #9ca3af;
}

/* ==========================================
   HABIT LIST
   ========================================== */

.habit-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.habit-item {
    background: var(--surface);
    border-radius: 10px;
    padding: 14px 16px;
    display: flex;
    align-items: center;
    cursor: pointer;
    transition: all 0.1s;
}

.habit-item:active { transform: scale(0.98); }
.habit-item.completed { opacity: 0.35; }

.habit-check {
    width: 18px;
    height: 18px;
    border: 2px solid var(--border);
    border-radius: 50%;
    margin-right: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
    flex-shrink: 0;
}

.habit-item.completed .habit-check {
    background: var(--success);
    border-color: var(--success);
}

.habit-check svg {
    width: 10px;
    height: 10px;
    stroke: var(--bg);
    stroke-width: 3;
    opacity: 0;
}

.habit-item.completed .habit-check svg { opacity: 1; }

.habit-name {
    flex: 1;
    font-size: 14px;
}

.habit-xp {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
}

/* ==========================================
   LOG GRID
   ========================================== */

.log-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
}

.log-card {
    background: var(--surface);
    border-radius: 10px;
    padding: 16px 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.1s;
}

.log-card:active {
    transform: scale(0.95);
    background: var(--surface-2);
}

.log-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 4px;
}

.log-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
}

/* ==========================================
   STREAKS BAR
   ========================================== */

.streaks-bar {
    display: flex;
    align-items: center;
    justify-content: space-around;
    background: var(--surface);
    border-radius: 12px;
    padding: 16px;
}

.streak-item { text-align: center; }

.streak-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 22px;
    font-weight: 700;
}

.streak-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-top: 4px;
}

.streak-divider {
    width: 1px;
    height: 28px;
    background: var(--border);
}

/* ==========================================
   SKILL TREES
   ========================================== */

.skill-trees {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.skill-tree {
    background: var(--surface);
    border-radius: 12px;
    padding: 16px;
}

.tree-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 14px;
}

.tree-icon {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 700;
    width: 28px;
    height: 28px;
    background: var(--text);
    color: var(--bg);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tree-info { flex: 1; }

.tree-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
}

.tree-level {
    font-size: 10px;
    color: var(--text-muted);
}

.tree-xp {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
}

.skill-nodes {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
}

.skill-node {
    background: var(--surface-2);
    border-radius: 6px;
    padding: 8px 12px;
    font-size: 10px;
    color: var(--text-dim);
    transition: all 0.2s;
}

.skill-node.unlocked {
    background: var(--surface-3);
    color: var(--text-muted);
}

.skill-node.active {
    background: var(--text);
    color: var(--bg);
    font-weight: 600;
}

/* ==========================================
   STATS VIEW
   ========================================== */

.analysis-card {
    background: var(--surface);
    border-radius: 12px;
    padding: 18px;
    margin-bottom: 12px;
}

.analysis-header {
    margin-bottom: 14px;
}

.analysis-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
    letter-spacing: 0.15em;
}

/* Weight Display */
.weight-display {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 16px;
}

.weight-current, .weight-target { text-align: center; }

.weight-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 32px;
    font-weight: 700;
}

.weight-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-top: 4px;
}

.weight-change {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    padding: 6px 12px;
    border-radius: 6px;
}

.weight-change.positive {
    color: var(--success);
    background: rgba(34, 197, 94, 0.1);
}

.weight-change.negative {
    color: var(--warning);
    background: rgba(234, 179, 8, 0.1);
}

/* Progress Bar */
.progress-container { margin-top: 8px; }

.progress-bar {
    height: 6px;
    background: var(--surface-3);
    border-radius: 3px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: var(--success);
    border-radius: 3px;
    transition: width 0.5s ease;
}

.progress-labels {
    display: flex;
    justify-content: space-between;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 6px;
}

/* Week Grid */
.week-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

.week-day {
    aspect-ratio: 1;
    background: var(--surface-2);
    border-radius: 6px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    min-width: 0; /* Allow shrinking */
    overflow: hidden;
}

/* Mobile-specific week grid adjustments */
@media (max-width: 400px) {
    .week-grid {
        gap: 3px;
    }
    
    .week-day {
        border-radius: 4px;
        font-size: 10px;
    }
    
    .week-day-label {
        font-size: 7px;
    }
    
    .week-day-grade {
        font-size: 12px;
    }
    
    .week-day-date {
        font-size: 9px;
    }
}

.week-day.completed {
    background: var(--text);
    color: var(--bg);
}

.week-day.failed {
    background: var(--error);
    color: var(--text);
}

.week-day.inactive {
    background: transparent;
    color: var(--text-muted);
    opacity: 0.4;
}

.week-day.today {
    border: 2px solid var(--text);
}

.week-day-label {
    font-size: 8px;
    color: var(--text-muted);
    margin-bottom: 2px;
    font-weight: 400;
}

.week-day.completed .week-day-label,
.week-day.failed .week-day-label {
    color: inherit;
    opacity: 0.6;
}

.week-legend {
    display: flex;
    justify-content: center;
    gap: 16px;
    margin-top: 12px;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 10px;
    color: var(--text-muted);
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 3px;
    background: var(--surface-2);
}

.legend-dot.completed { background: var(--text); }
.legend-dot.failed { background: var(--error); }
.legend-dot.today { border: 2px solid var(--text); background: transparent; }

/* Day grade colors */
.week-day.grade-a { background: #22c55e; color: #000; }
.week-day.grade-b { background: #84cc16; color: #000; }
.week-day.grade-c { background: #eab308; color: #000; }
.week-day.grade-d { background: #f97316; color: #000; }
.week-day.grade-f { background: #ef4444; color: #fff; }

.legend-dot.grade-a { background: #22c55e; }
.legend-dot.grade-b { background: #84cc16; }
.legend-dot.grade-c { background: #eab308; }
.legend-dot.grade-d { background: #f97316; }
.legend-dot.grade-f { background: #ef4444; }

.week-day.grade-a .week-day-label,
.week-day.grade-b .week-day-label,
.week-day.grade-c .week-day-label,
.week-day.grade-d .week-day-label,
.week-day.grade-f .week-day-label {
    color: inherit;
    opacity: 0.7;
}

.week-day-grade {
    font-size: 14px;
    font-weight: 700;
    margin-top: 2px;
}

.week-day-date {
    font-size: 11px;
}

/* Averages */
.avg-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
}

.avg-item { text-align: center; }

.avg-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
}

.avg-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-top: 4px;
}

.avg-goal {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 2px;
}

/* ==========================================
   PROFILE VIEW
   ========================================== */

.profile-hero {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 24px 0;
}

.profile-ring {
    width: 90px;
    height: 90px;
    position: relative;
    margin-bottom: 14px;
}

.profile-ring svg {
    transform: rotate(-90deg);
    width: 100%;
    height: 100%;
}

.ring-bg {
    fill: none;
    stroke: var(--surface-3);
    stroke-width: 5;
}

.ring-fill {
    fill: none;
    stroke: var(--text);
    stroke-width: 5;
    stroke-linecap: round;
    stroke-dasharray: 283;
    stroke-dashoffset: 283;
    transition: stroke-dashoffset 0.5s ease;
}

.profile-level-num {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
}

.profile-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    letter-spacing: 0.2em;
    margin-bottom: 6px;
}

.profile-xp {
    font-size: 11px;
    color: var(--text-muted);
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin-bottom: 24px;
}

.stat-box {
    background: var(--surface);
    border-radius: 10px;
    padding: 14px 8px;
    text-align: center;
}

.stat-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
}

.stat-label {
    font-size: 8px;
    color: var(--text-muted);
    letter-spacing: 0.05em;
    margin-top: 4px;
}

/* Goals List */
.goals-list {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
}

.goal-row {
    display: flex;
    justify-content: space-between;
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
    font-size: 13px;
}

.goal-row:last-child { border-bottom: none; }
.goal-row span:first-child { color: var(--text-muted); }
.goal-row span:last-child {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
}

/* Settings List */
.settings-list {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
}

.setting-row {
    display: flex;
    justify-content: space-between;
    padding: 16px;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
    cursor: pointer;
}

.setting-row:last-child { border-bottom: none; }
.setting-row:active { background: var(--surface-2); }
.setting-row.danger { color: var(--error); }

.setting-row.highlight {
    background: rgba(100, 200, 100, 0.1);
    border: 1px solid rgba(100, 200, 100, 0.3);
}

.backup-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 16px;
}

.backup-item {
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
    cursor: pointer;
}

.backup-item:active {
    background: var(--border);
}

.backup-time {
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 4px;
}

.backup-meta {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: var(--text-muted);
}

.backup-reason {
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.backup-count {
    font-family: 'JetBrains Mono', monospace;
}

.cancel-btn {
    width: 100%;
    padding: 14px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text-muted);
    font-weight: 600;
    cursor: pointer;
}

.setting-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

/* Edit Button */
.edit-btn {
    background: var(--surface-2);
    border: none;
    color: var(--text);
    padding: 6px 12px;
    border-radius: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
}

/* ==========================================
   MODALS
   ========================================== */

.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    z-index: 200;
    align-items: flex-end;
}

.modal.active {
    display: flex;
    animation: fadeIn 0.2s ease;
}

.modal-sheet {
    background: var(--surface);
    border-radius: 16px 16px 0 0;
    width: 100%;
    padding: 20px;
    padding-top: 12px;
    padding-bottom: calc(20px + var(--safe-bottom));
    animation: slideUp 0.2s ease-out;
    max-height: 85vh;
    overflow-y: auto;
    /* Hardware acceleration */
    transform: translateZ(0);
    will-change: transform;
    position: relative;
}

@keyframes slideUp {
    from { transform: translateY(100%); }
    to { transform: translateY(0); }
}

.modal-handle {
    width: 40px;
    height: 5px;
    background: var(--text-dim);
    border-radius: 3px;
    margin: 8px auto 16px;
    opacity: 0.6;
}

.modal-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.15em;
    text-align: center;
    margin-bottom: 20px;
}

/* Logger Input */
.logger-input {
    width: 100%;
    background: var(--surface-2);
    border: 2px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 36px;
    font-weight: 700;
    color: var(--text);
    text-align: center;
    margin-bottom: 16px;
}

.logger-input:focus {
    outline: none;
    border-color: var(--text);
}

.preset-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-bottom: 20px;
}

.preset-btn {
    background: var(--surface-2);
    border: none;
    color: var(--text);
    padding: 14px;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
}

.preset-btn:active { background: var(--surface-3); }

.logger-goal {
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 16px;
}

/* Save Button */
.save-btn {
    width: 100%;
    background: var(--text);
    color: var(--bg);
    border: none;
    padding: 16px;
    border-radius: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.15em;
    cursor: pointer;
}

/* Goal Inputs */
.input-group {
    margin-bottom: 20px;
}

.input-group label {
    display: block;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.input-field {
    width: 100%;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    color: var(--text);
}

.input-field:focus {
    outline: none;
    border-color: var(--text);
}

/* Restore Textarea */
.restore-textarea {
    width: 100%;
    height: 200px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text);
    resize: none;
    margin-bottom: 16px;
}

.restore-textarea:focus {
    outline: none;
    border-color: var(--text);
}

/* ==========================================
   COMPLETION OVERLAY
   ========================================== */

.overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.92);
    z-index: 300;
    align-items: center;
    justify-content: center;
}

.overlay.active {
    display: flex;
    animation: fadeIn 0.2s ease;
}

.completion-content { text-align: center; }

.completion-ring {
    width: 100px;
    height: 100px;
    position: relative;
    margin: 0 auto 16px;
}

.completion-ring svg {
    transform: rotate(-90deg);
    width: 100%;
    height: 100%;
}

.completion-ring .ring-bg {
    stroke: var(--surface-3);
    stroke-width: 4;
}

.completion-ring .ring-fill {
    stroke: var(--success);
    stroke-width: 4;
    animation: ringFill 0.5s ease forwards 0.1s;
}

@keyframes ringFill {
    to { stroke-dashoffset: 0; }
}

.completion-check {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    animation: checkPop 0.25s ease forwards 0.35s;
}

.completion-check svg {
    width: 36px;
    height: 36px;
    stroke: var(--success);
}

@keyframes checkPop {
    0% { transform: translate(-50%, -50%) scale(0); }
    70% { transform: translate(-50%, -50%) scale(1.15); }
    100% { transform: translate(-50%, -50%) scale(1); }
}

.completion-xp {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
    opacity: 0;
    animation: xpFade 0.3s ease forwards 0.45s;
}

.completion-mult {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--success);
    margin-top: 8px;
    opacity: 0;
    animation: xpFade 0.3s ease forwards 0.6s;
}

@keyframes xpFade {
    to { opacity: 1; }
}

/* ==========================================
   LEVEL UP CELEBRATION
   ========================================== */

.completion-overlay.levelup .completion-sheet {
    background: linear-gradient(180deg, #1a1a2e 0%, #0d0d0d 100%);
    border: 2px solid #ffd700;
}

.levelup-content {
    text-align: center;
    padding: 20px 0;
}

.levelup-badge {
    width: 120px;
    height: 120px;
    margin: 0 auto 24px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
    border-radius: 50%;
    animation: levelPulse 1s ease infinite;
}

.levelup-glow {
    position: absolute;
    inset: -10px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
    animation: glowPulse 1.5s ease infinite;
}

@keyframes levelPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes glowPulse {
    0%, 100% { opacity: 0.5; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.2); }
}

.levelup-level {
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 900;
    color: #0d0d0d;
    z-index: 1;
}

.levelup-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    color: #ffd700;
    letter-spacing: 0.2em;
    margin-bottom: 8px;
    animation: slideUp 0.5s ease forwards;
}

.levelup-name {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 0.15em;
    margin-bottom: 16px;
    animation: slideUp 0.5s ease forwards 0.1s;
    opacity: 0;
}

.levelup-reward {
    font-size: 13px;
    color: var(--text-muted);
    padding: 12px 20px;
    background: var(--surface-2);
    border-radius: 8px;
    border-left: 3px solid #ffd700;
    animation: slideUp 0.5s ease forwards 0.2s;
    opacity: 0;
}

@keyframes slideUp {
    from { 
        opacity: 0;
        transform: translateY(20px);
    }
    to { 
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==========================================
   ONBOARDING
   ========================================== */

.onboarding-container {
    max-width: 400px;
    margin: 0 auto;
}

/* Auth Screen Styles */
.auth-screen {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 40px 24px;
}

.auth-header {
    text-align: center;
    margin-bottom: 40px;
}

.auth-logo {
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 16px;
}

.auth-header h1 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 8px;
}

.auth-subtitle {
    color: var(--text-muted);
    font-size: 14px;
}

.auth-form {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
}

.auth-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 24px;
}

.auth-tab {
    flex: 1;
    padding: 12px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.auth-tab.active {
    background: var(--text);
    color: var(--bg);
    border-color: var(--text);
}

.auth-form .form-group {
    margin-bottom: 16px;
}

.auth-form .form-group label {
    display: block;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.auth-form .form-group input {
    width: 100%;
    padding: 14px 16px;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-size: 16px;
}

.auth-form .form-group input:focus {
    outline: none;
    border-color: var(--text);
}

.auth-error {
    color: var(--error);
    font-size: 13px;
    margin-bottom: 16px;
    min-height: 20px;
}

.auth-submit-btn {
    width: 100%;
    padding: 16px;
    background: var(--text);
    border: none;
    border-radius: 8px;
    color: var(--bg);
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s;
}

.auth-submit-btn:hover {
    opacity: 0.9;
}

.auth-submit-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.auth-footer {
    text-align: center;
    margin-top: 24px;
    color: var(--text-dim);
    font-size: 12px;
}

.onboard-step {
    display: none;
    animation: fadeIn 0.3s ease;
}

.onboard-step.active { display: block; }

.onboard-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    letter-spacing: 0.1em;
    margin-bottom: 8px;
}

.onboard-subtitle {
    font-size: 18px;
    color: var(--text-2);
    margin-bottom: 24px;
}

.onboard-text {
    font-size: 14px;
    color: var(--text-muted);
    line-height: 1.6;
    margin-bottom: 12px;
}

.onboard-text.dim { color: var(--text-dim); }

.onboard-progress {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-bottom: 8px;
}

.onboard-step-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    letter-spacing: 0.15em;
    margin-bottom: 24px;
}

.onboard-btn {
    width: 100%;
    background: var(--text);
    color: var(--bg);
    border: none;
    padding: 18px;
    border-radius: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 0.15em;
    cursor: pointer;
    margin-top: 32px;
}

.onboard-btn:active {
    transform: scale(0.98);
    opacity: 0.9;
}

/* Calc Results */
.calc-results {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
    margin: 20px 0;
}

.calc-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    border-bottom: 1px solid var(--border);
}

.calc-item:last-child { border-bottom: none; }
.calc-item.highlight { background: var(--surface-2); }

.calc-label {
    font-size: 11px;
    color: var(--text-muted);
    letter-spacing: 0.05em;
}

.calc-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 20px;
    font-weight: 700;
}

.calc-explanation {
    font-size: 12px;
    color: var(--text-2);
    text-align: center;
    padding: 12px;
    background: var(--surface);
    border-radius: 8px;
}

/* Schedule Preview */
.schedule-preview {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
    margin-top: 20px;
}

.schedule-day {
    display: flex;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    font-size: 13px;
}

.schedule-day:last-child { border-bottom: none; }

.schedule-day span:first-child {
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-muted);
    font-size: 11px;
    letter-spacing: 0.1em;
}

/* Accountability Warning */
.accountability-warning {
    background: var(--surface);
    border-left: 3px solid var(--warning);
    border-radius: 0 10px 10px 0;
    padding: 16px;
    margin: 20px 0;
}

.warn-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--warning);
    letter-spacing: 0.1em;
    margin-bottom: 12px;
}

.accountability-warning ul {
    list-style: none;
    font-size: 12px;
    color: var(--text-2);
    line-height: 1.8;
}

.accountability-warning li::before {
    content: '→ ';
    color: var(--text-muted);
}

/* Summary */
.onboard-summary {
    background: var(--surface);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 20px;
}

.summary-item {
    display: flex;
    justify-content: space-between;
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
}

.summary-item:last-child { border-bottom: none; }

/* Feature Summary */
.feature-summary {
    margin: 20px 0;
}

.feature-item {
    background: var(--surface);
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 12px;
}

.feature-item:last-child {
    margin-bottom: 0;
}

.feature-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 0.5px;
    margin-bottom: 6px;
}

.feature-desc {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.5;
}
.summary-item span:first-child { color: var(--text-muted); }
.summary-item span:last-child {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
}

/* ==========================================
   BOTTOM NAVIGATION
   ========================================== */

.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--surface);
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: space-around;
    padding: 8px 0;
    padding-bottom: calc(8px + var(--safe-bottom));
    z-index: 50;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
    color: var(--text-dim);
    cursor: pointer;
    padding: 6px 16px;
    background: none;
    border: none;
    transition: color 0.15s;
}

.nav-item.active { color: var(--accent); }

.nav-icon {
    width: 22px;
    height: 22px;
}

.nav-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    letter-spacing: 0.1em;
}

/* ==========================================
   SIMPLE HEADER FOR INNER VIEWS
   ========================================== */

.view-header {
    padding: calc(16px + var(--safe-top)) 0 20px;
    position: sticky;
    top: 0;
    background: var(--bg);
    z-index: 10;
}

.view-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 22px;
    font-weight: 600;
    letter-spacing: 0.1em;
}

/* ==========================================
   VERSION INFO
   ========================================== */

.version-info {
    text-align: center;
    padding: 20px;
    font-size: 11px;
    color: var(--text-dim);
    line-height: 1.6;
}

/* ==========================================
   RUNNING MODULE
   ========================================== */

.running-card {
    background: var(--surface);
    border-radius: 12px;
    padding: 18px;
}

/* Clean Running Card Redesign */
.running-card-clean {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
}

.run-main {
    text-align: center;
    padding: 16px 0 20px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 16px;
}

.run-distance {
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    color: var(--text);
    line-height: 1;
}

/* Run completion states */
.run-distance.run-complete {
    color: var(--success);
}

.run-distance.run-partial {
    color: #fbbf24;
}

.prescribed-done {
    text-decoration: line-through;
    opacity: 0.6;
}

.prescribed-partial {
    color: #fbbf24;
}

.run-logged-status {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    margin-top: 8px;
    padding: 6px 12px;
    border-radius: 6px;
    display: inline-block;
}

.run-complete .run-logged-status {
    background: rgba(34, 197, 94, 0.15);
    color: var(--success);
}

.run-partial .run-logged-status {
    background: rgba(251, 191, 36, 0.15);
    color: #fbbf24;
}

.running-card-clean.run-complete {
    border-color: var(--success);
    border-width: 2px;
}

.running-card-clean.run-partial {
    border-color: #fbbf24;
    border-width: 2px;
}

.section-badge.run-complete {
    background: var(--success);
    color: var(--bg);
}

.section-badge.run-partial {
    background: #fbbf24;
    color: var(--bg);
}

.run-pace-target {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    color: var(--text-muted);
    margin-top: 8px;
}

.run-adjusted {
    font-size: 11px;
    color: var(--warning);
    margin-top: 6px;
}

.run-feel {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.5;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 16px;
}

/* Injury Protocol */
.injury-protocol {
    background: var(--surface-2);
    border-radius: 8px;
    padding: 14px;
    margin-bottom: 16px;
}

.protocol-section {
    display: flex;
    gap: 12px;
    margin-bottom: 10px;
    align-items: flex-start;
}

.protocol-section:last-of-type {
    margin-bottom: 12px;
}

.protocol-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    background: var(--surface);
    padding: 3px 6px;
    border-radius: 4px;
    flex-shrink: 0;
    width: 45px;
    text-align: center;
}

.protocol-items {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.4;
}

.protocol-tip {
    font-size: 11px;
    color: var(--warning);
    padding-top: 10px;
    border-top: 1px solid var(--border);
    font-style: italic;
}

/* ==========================================
   WORKOUT ORDER CARD
   ========================================== */

.workout-order-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
}

.workout-order-card.strength {
    border-left: 3px solid #a78bfa;
}

.workout-order-card.cardio {
    border-left: 3px solid #60a5fa;
}

.workout-order-card.neutral {
    border-left: 3px solid var(--text-muted);
}

.order-header {
    margin-bottom: 12px;
}

.order-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
}

.order-sequence {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.order-item {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 700;
    padding: 8px 16px;
    border-radius: 8px;
    background: var(--surface-2);
}

.order-item.lift {
    color: #a78bfa;
    background: rgba(167, 139, 250, 0.1);
}

.order-item.run {
    color: #60a5fa;
    background: rgba(96, 165, 250, 0.1);
}

.order-arrow {
    color: var(--text-dim);
    font-size: 18px;
}

.order-reason {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.4;
    margin-bottom: 8px;
}

.order-science {
    font-size: 11px;
    color: var(--text-dim);
}

.order-science summary {
    cursor: pointer;
    color: var(--text-muted);
    padding: 4px 0;
}

.order-science summary:hover {
    color: var(--text);
}

.order-science p {
    margin: 8px 0 0;
    padding: 10px;
    background: var(--surface-2);
    border-radius: 6px;
    line-height: 1.5;
}

/* ==========================================
   TODAY'S PROGRESS CARD
   ========================================== */

.progress-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
}

.progress-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
}

.progress-title {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
}

.progress-percent {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-muted);
}

.progress-percent.good {
    color: var(--success);
}

.progress-percent.ok {
    color: var(--warning);
}

.progress-checklist {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 14px;
}

.progress-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: var(--surface-2);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.progress-item.done {
    background: rgba(34, 197, 94, 0.08);
    border-left: 2px solid var(--success);
}

.progress-check {
    font-size: 14px;
    color: var(--text-dim);
    width: 20px;
    text-align: center;
}

.progress-item.done .progress-check {
    color: var(--success);
}

.progress-label {
    flex: 1;
    font-size: 13px;
    color: var(--text);
}

.progress-detail {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
}

.progress-item.done .progress-detail {
    color: var(--success);
}

.progress-streak {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px;
    background: var(--surface-2);
    border-radius: 8px;
}

.streak-flame {
    color: #fbbf24;
    font-size: 14px;
}

.streak-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    color: var(--text);
}

.streak-mult {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--success);
    background: rgba(34, 197, 94, 0.15);
    padding: 2px 8px;
    border-radius: 4px;
}

/* ==========================================
   TAB BAR SPACER
   ========================================== */

.tab-spacer {
    height: 100px; /* Account for tab bar height + padding */
}

/* ==========================================
   WEIGHT LINE CHART
   ========================================== */

.weight-chart-card .analysis-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.chart-period-toggle {
    display: flex;
    gap: 4px;
}

.period-btn {
    width: 28px;
    height: 28px;
    border: none;
    border-radius: 6px;
    background: var(--surface-2);
    color: var(--text-dim);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
}

.period-btn.active {
    background: var(--text);
    color: var(--bg);
}

.weight-stats-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin: 16px 0;
}

.weight-stat {
    text-align: center;
}

.weight-stat .stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 20px;
    font-weight: 700;
    color: var(--text);
}

.weight-stat .stat-value.positive {
    color: #22c55e;
}

.weight-stat .stat-value.negative {
    color: #ef4444;
}

.weight-stat .stat-label {
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-top: 4px;
}

.weight-chart {
    width: 100%;
    margin-top: 8px;
}

.line-chart {
    width: 100%;
    height: auto;
}

.chart-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    fill: var(--text-dim);
}

.grid-line {
    stroke: var(--border);
    stroke-width: 1;
    stroke-dasharray: 2, 4;
}

.target-line {
    stroke: #22c55e;
    stroke-width: 1;
    stroke-dasharray: 4, 4;
    opacity: 0.6;
}

.target-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    fill: #22c55e;
}

.chart-empty {
    padding: 30px 20px;
    text-align: center;
}

.chart-empty .empty-text {
    font-size: 12px;
    color: var(--text-dim);
}

/* ==========================================
   DAY SCORE CARD
   ========================================== */

.day-score-card {
    background: linear-gradient(135deg, var(--surface) 0%, var(--surface-2) 100%);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 16px;
}

.day-score-main {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
}

.day-score-grade {
    width: 64px;
    height: 64px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'JetBrains Mono', monospace;
    font-size: 32px;
    font-weight: 900;
}

.day-score-grade.excellent {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color: white;
}

.day-score-grade.good {
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
}

.day-score-grade.ok {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
}

.day-score-grade.low {
    background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
    color: white;
}

.day-score-grade.poor {
    background: var(--surface-2);
    color: var(--text-dim);
    border: 2px dashed var(--border);
}

.day-score-info {
    flex: 1;
}

.day-score-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-bottom: 4px;
}

.day-score-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    color: var(--text);
}

.day-score-value .score-max {
    font-size: 14px;
    color: var(--text-dim);
    font-weight: 400;
}

.day-score-msg {
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 4px;
}

.day-score-breakdown {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
}

.score-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px 4px;
    background: var(--surface-2);
    border-radius: 8px;
    font-size: 10px;
    color: var(--text-dim);
}

.score-item.done {
    color: var(--text);
}

.score-item.done .score-dot {
    background: var(--success);
}

.score-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--border);
}

.score-detail {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
}

/* ==========================================
   QUICK WEIGHT INPUT
   ========================================== */

.quick-weight-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 12px;
    margin-bottom: 12px;
    overflow: hidden;
}

.weight-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.weight-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
}

.weight-target {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
}

.weight-input-row {
    display: flex;
    gap: 8px;
    align-items: stretch;
}

.weight-quick-input {
    flex: 1;
    min-width: 0;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
    text-align: center;
}

.weight-quick-input:focus {
    outline: none;
    border-color: var(--text);
}

.weight-quick-input::placeholder {
    color: var(--text-dim);
}

.weight-save-btn {
    padding: 10px 14px;
    background: var(--text);
    color: var(--bg);
    border: none;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
    flex-shrink: 0;
}

.weight-save-btn:active {
    opacity: 0.8;
}

.weight-logged {
    margin-top: 8px;
    font-size: 11px;
    color: var(--success);
    text-align: center;
}

/* ==========================================
   FEEDBACK SECTION
   ========================================== */

.feedback-section {
    border-top: 1px solid var(--border);
    padding-top: 20px;
    margin-top: 10px;
}

.feedback-textarea {
    width: 100%;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    color: var(--text);
    font-family: 'Inter', sans-serif;
    font-size: 14px;
    resize: none;
    margin-bottom: 12px;
}

.feedback-textarea::placeholder {
    color: var(--text-dim);
}

.feedback-textarea:focus {
    outline: none;
    border-color: var(--primary);
}

.feedback-btn {
    width: 100%;
    padding: 12px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    cursor: pointer;
    transition: all 0.2s ease;
}

.feedback-btn:active {
    background: var(--primary);
    color: var(--bg);
}

.feedback-list {
    margin-top: 16px;
}

.feedback-history-label {
    font-size: 10px;
    color: var(--text-dim);
    letter-spacing: 0.05em;
    margin-bottom: 8px;
}

.feedback-item {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
}

.feedback-date {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    white-space: nowrap;
}

.feedback-text {
    font-size: 12px;
    color: var(--text-muted);
    flex: 1;
}

.view-all-feedback-btn {
    width: 100%;
    padding: 10px;
    margin-top: 12px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    cursor: pointer;
}

.feedback-all-list {
    max-height: 50vh;
    overflow-y: auto;
    margin-bottom: 16px;
}

.feedback-full-item {
    padding: 12px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-bottom: 10px;
}

.feedback-meta {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    margin-bottom: 6px;
}

.feedback-content {
    font-size: 13px;
    color: var(--text);
    line-height: 1.5;
    white-space: pre-wrap;
}

.clear-btn {
    width: 100%;
    padding: 12px;
    background: transparent;
    border: 1px solid var(--danger);
    border-radius: 8px;
    color: var(--danger);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    cursor: pointer;
}

.feedback-export-textarea {
    width: 100%;
    min-height: 200px;
    max-height: 40vh;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    line-height: 1.5;
    resize: none;
    margin-bottom: 16px;
    -webkit-user-select: text;
    user-select: text;
}

.run-type {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 8px;
}

.run-details {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.5;
    margin-bottom: 12px;
}

.injury-mods {
    background: var(--surface-2);
    border-radius: 8px;
    padding: 12px;
    margin-top: 12px;
}

.mods-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--warning);
    letter-spacing: 0.15em;
    margin-bottom: 8px;
}

.mod-item {
    font-size: 11px;
    color: var(--text-2);
    padding: 4px 0;
    border-bottom: 1px solid var(--border);
}

.mod-item:last-child { border-bottom: none; }

/* Running Setup */
.running-setup {
    margin: 16px 0;
}

.setup-section {
    margin-bottom: 20px;
}

.setup-section label {
    display: block;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 10px;
}

.goal-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}

.goal-btn {
    background: var(--surface-2);
    border: 2px solid transparent;
    color: var(--text);
    padding: 14px;
    border-radius: 10px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    text-align: left;
    transition: all 0.15s;
}

.goal-btn.active {
    border-color: var(--text);
    background: var(--surface-3);
}

.goal-btn .goal-weeks {
    display: block;
    font-size: 10px;
    color: var(--text-muted);
    margin-top: 4px;
}

.injury-options {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.injury-check {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px;
    background: var(--surface-2);
    border: 2px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.injury-check:has(input:checked) {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--text);
}

.injury-check input[type="checkbox"] {
    width: 22px;
    height: 22px;
    accent-color: var(--text);
    flex-shrink: 0;
}

.injury-check span {
    font-size: 14px;
    font-weight: 500;
}

/* Onboarding posture options */
.onboard-options.posture-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 45vh;
    overflow-y: auto;
}

.onboard-options .posture-check {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px;
    background: var(--surface-2);
    border-radius: 10px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.15s ease;
}

.onboard-options .posture-check.active {
    border-color: var(--text);
    background: var(--surface-3);
}

.onboard-options .posture-check input {
    margin-top: 2px;
    width: 18px;
    height: 18px;
    accent-color: var(--text);
}

.onboard-options .posture-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex: 1;
}

.onboard-options .posture-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
}

.onboard-options .posture-desc {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.4;
}

/* ==========================================
   ADVANCED RUNNING UI
   ========================================== */

.run-type-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.15em;
    padding: 6px 12px;
    border-radius: 6px;
    display: inline-block;
    margin-bottom: 12px;
}

.run-type-badge.easy { background: var(--surface-2); color: var(--text-muted); }
.run-type-badge.tempo { background: rgba(234, 179, 8, 0.2); color: var(--warning); }
.run-type-badge.intervals { background: rgba(239, 68, 68, 0.2); color: var(--error); }
.run-type-badge.long { background: rgba(34, 197, 94, 0.2); color: var(--success); }
.run-type-badge.recovery { background: var(--surface-2); color: var(--text-dim); }

.run-details-main {
    margin-bottom: 12px;
}

.run-description {
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 8px;
}

.run-pace {
    font-size: 13px;
    color: var(--text-muted);
}

.phase-indicator {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    padding: 6px 10px;
    background: var(--surface-2);
    border-radius: 4px;
    display: inline-block;
    margin-bottom: 12px;
}

.run-feeling {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 12px;
}

.feeling-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.15em;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.feeling-text {
    font-size: 13px;
    line-height: 1.5;
    color: var(--text-2);
}

.run-science {
    background: var(--surface-2);
    border-left: 3px solid var(--text-dim);
    border-radius: 0 10px 10px 0;
    padding: 14px;
    margin-bottom: 12px;
}

.science-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-bottom: 8px;
}

.science-text {
    font-size: 12px;
    line-height: 1.6;
    color: var(--text-muted);
}

.log-run-btn {
    width: 100%;
    background: var(--text);
    color: var(--bg);
    border: none;
    padding: 14px;
    border-radius: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
    margin-top: 12px;
}

.log-run-btn.secondary {
    background: var(--surface-2);
    color: var(--text);
}

.rest-day-card {
    text-align: center;
    padding: 20px;
}

.rest-message {
    color: var(--text-muted);
    margin-bottom: 16px;
}

/* Logged run display (rest day override) */
.run-logged-display {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 8px;
    margin: 16px 0;
}

.run-distance-big {
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    color: var(--accent);
    line-height: 1;
}

.run-unit {
    font-size: 16px;
    color: var(--text-muted);
    font-weight: 500;
}

.run-card.completed {
    background: var(--surface-2);
    border: 1px solid var(--success);
    border-radius: var(--radius-lg);
    padding: 20px;
    text-align: center;
}

/* Run Logger Modal */
.run-logger {
    max-height: 90vh;
}

/* Run Analysis Card */
.run-analysis-card {
    background: var(--surface-2);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    text-align: center;
}

.analysis-stat {
    display: flex;
    align-items: baseline;
    justify-content: center;
    gap: 8px;
    margin-bottom: 8px;
}

.stat-actual {
    font-size: 28px;
    font-weight: 700;
    font-family: 'JetBrains Mono', monospace;
}

.stat-vs {
    color: var(--text-muted);
    font-size: 14px;
}

.stat-prescribed {
    font-size: 16px;
    color: var(--text-muted);
}

.analysis-shortfall {
    color: var(--text-dim);
    font-size: 13px;
}

.ai-feedback-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 30px;
    color: var(--text-muted);
}

.loading-spinner {
    width: 24px;
    height: 24px;
    border: 2px solid var(--border);
    border-top-color: var(--text);
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.ai-run-advice {
    background: var(--surface-2);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 16px;
}

.advice-title {
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.advice-content {
    font-size: 14px;
    line-height: 1.6;
    color: var(--text);
    margin-bottom: 16px;
}

.advice-adjustment {
    background: rgba(100, 200, 100, 0.1);
    border: 1px solid rgba(100, 200, 100, 0.3);
    border-radius: 8px;
    padding: 12px;
    font-size: 13px;
}

.run-type-select {
    display: flex;
    gap: 6px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.run-type-btn {
    flex: 1;
    min-width: 60px;
    padding: 10px 8px;
    background: var(--surface-2);
    border: 2px solid transparent;
    border-radius: 8px;
    font-size: 10px;
    font-weight: 600;
    color: var(--text);
    cursor: pointer;
}

.run-type-btn.active {
    border-color: var(--text);
}

.run-inputs {
    margin-bottom: 16px;
}

.effort-select {
    margin-bottom: 16px;
}

.effort-select label {
    display: block;
    font-size: 10px;
    color: var(--text-muted);
    margin-bottom: 8px;
    letter-spacing: 0.1em;
}

.effort-buttons {
    display: flex;
    gap: 6px;
}

.effort-btn {
    flex: 1;
    padding: 10px 0;
    background: var(--surface-2);
    border: 2px solid transparent;
    border-radius: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text);
    cursor: pointer;
}

.effort-btn.active {
    border-color: var(--text);
    background: var(--surface-3);
}

.pace-preview {
    background: var(--surface-2);
    border-radius: 8px;
    padding: 12px;
    text-align: center;
    font-size: 14px;
    color: var(--text-muted);
    margin-bottom: 16px;
}

/* Running Dashboard */
.running-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
    margin-bottom: 16px;
}

.running-stat {
    text-align: center;
}

.running-stat .stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
}

.running-stat .stat-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.05em;
    margin-top: 4px;
}

.phase-card {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 16px;
}

.phase-name {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.1em;
    margin-bottom: 4px;
}

.phase-desc {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 8px;
}

.phase-week {
    font-size: 11px;
    color: var(--text-dim);
}

.training-paces {
    margin-bottom: 16px;
}

.paces-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-bottom: 10px;
}

.paces-grid {
    display: flex;
    gap: 10px;
}

.pace-item {
    flex: 1;
    background: var(--surface-2);
    border-radius: 8px;
    padding: 10px;
    text-align: center;
}

.pace-type {
    display: block;
    font-size: 10px;
    color: var(--text-muted);
    margin-bottom: 4px;
}

.pace-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
}

.recent-runs {
    border-top: 1px solid var(--border);
    padding-top: 12px;
}

.runs-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-bottom: 10px;
}

.run-item {
    display: flex;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
    font-size: 12px;
}

.run-item:last-child {
    border-bottom: none;
}

.run-date {
    color: var(--text-muted);
    width: 60px;
}

.run-dist {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 600;
    flex: 1;
}

.run-pace {
    font-family: 'JetBrains Mono', monospace;
    color: var(--text-muted);
    width: 60px;
    text-align: right;
}

.run-effort-dot {
    width: 8px;
    height: 8px;
    background: var(--text);
    border-radius: 50%;
    margin-left: 10px;
}

/* Track Indicator */
.track-indicator {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 12px;
    border-radius: 8px;
    margin-bottom: 14px;
    background: var(--surface-2);
}

.track-indicator.on-track {
    background: rgba(34, 197, 94, 0.1);
}

.track-indicator.slightly-behind,
.track-indicator.behind {
    background: rgba(234, 179, 8, 0.1);
}

.track-indicator.at-risk {
    background: rgba(239, 68, 68, 0.1);
}

.track-badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 0.1em;
    padding: 4px 8px;
    border-radius: 4px;
    background: var(--surface-3);
}

.track-indicator.on-track .track-badge {
    background: var(--success);
    color: var(--bg);
}

.track-indicator.slightly-behind .track-badge,
.track-indicator.behind .track-badge {
    background: var(--warning);
    color: var(--bg);
}

.track-indicator.at-risk .track-badge {
    background: var(--error);
    color: var(--text);
}

.track-message {
    font-size: 11px;
    color: var(--text-muted);
}

/* Tomorrow Preview */
.tomorrow-preview {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-top: 14px;
}

.tomorrow-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
}

.tomorrow-content {
    font-size: 12px;
    color: var(--text-muted);
}

/* ==========================================
   80/20 POLARIZED TRAINING
   ========================================== */

.polarized-card {
    background: var(--surface);
    border-radius: 10px;
    padding: 14px;
    margin: 14px 0;
}

.polarized-card.warning {
    border: 1px solid rgba(239, 68, 68, 0.3);
    background: rgba(239, 68, 68, 0.05);
}

.polarized-card.caution {
    border: 1px solid rgba(234, 179, 8, 0.3);
    background: rgba(234, 179, 8, 0.05);
}

.polarized-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.polarized-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-muted);
}

.polarized-status {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 4px;
}

.polarized-status.good {
    background: rgba(34, 197, 94, 0.2);
    color: var(--success);
}

.polarized-status.warning {
    background: rgba(239, 68, 68, 0.2);
    color: var(--error);
}

.polarized-status.caution {
    background: rgba(234, 179, 8, 0.2);
    color: var(--warning);
}

.polarized-bar {
    display: flex;
    height: 24px;
    border-radius: 6px;
    overflow: hidden;
    margin-bottom: 6px;
}

.polarized-easy {
    background: var(--success);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: width 0.3s ease;
}

.polarized-hard {
    background: var(--error);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: width 0.3s ease;
}

.polarized-easy span,
.polarized-hard span {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    color: var(--bg);
}

.polarized-labels {
    display: flex;
    justify-content: space-between;
    font-size: 9px;
    color: var(--text-dim);
    margin-bottom: 8px;
}

.polarized-message {
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
    line-height: 1.4;
}

/* ==========================================
   RACE PREDICTOR
   ========================================== */

.race-predictor {
    background: var(--surface);
    border-radius: 10px;
    padding: 14px;
    margin: 14px 0;
}

.predictor-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.predictions-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
}

.prediction-item {
    text-align: center;
    padding: 10px 4px;
    background: var(--surface-2);
    border-radius: 6px;
}

.race-dist {
    display: block;
    font-size: 9px;
    color: var(--text-dim);
    margin-bottom: 4px;
}

.race-time {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    color: var(--text);
}

/* ==========================================
   VDOT PROGRESS
   ========================================== */

.vdot-progress {
    background: var(--surface);
    border-radius: 10px;
    padding: 14px;
    margin: 14px 0;
}

.vdot-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.vdot-values {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
}

.vdot-start,
.vdot-current {
    text-align: center;
}

.vdot-label {
    display: block;
    font-size: 9px;
    color: var(--text-dim);
    margin-bottom: 4px;
}

.vdot-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    color: var(--text);
}

.vdot-arrow {
    font-size: 20px;
    color: var(--text-muted);
}

.vdot-gain {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    color: var(--success);
    background: rgba(34, 197, 94, 0.15);
    padding: 4px 10px;
    border-radius: 4px;
}

/* ==========================================
   READING MODULE
   ========================================== */

.reading-empty {
    background: var(--surface);
    border-radius: 12px;
    padding: 24px;
    text-align: center;
    cursor: pointer;
}

.reading-empty:active {
    background: var(--surface-2);
}

.empty-text {
    color: var(--text-muted);
    font-size: 13px;
    margin-bottom: 8px;
}

.empty-action {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text);
    letter-spacing: 0.1em;
}

.reading-card {
    background: var(--surface);
    border-radius: 12px;
    padding: 18px;
    cursor: pointer;
}

.reading-card:active {
    background: var(--surface-2);
}

.book-title {
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 12px;
}

.book-title-large {
    font-size: 18px;
    font-weight: 600;
    margin-bottom: 16px;
}

.book-title-modal {
    font-size: 16px;
    font-weight: 600;
    text-align: center;
    margin-bottom: 20px;
}

.book-progress-bar {
    height: 8px;
    background: var(--surface-3);
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 8px;
}

.book-progress-fill {
    height: 100%;
    background: var(--text);
    border-radius: 4px;
    transition: width 0.3s ease;
}

.book-stats {
    display: flex;
    justify-content: space-between;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

.big-progress-bar {
    height: 12px;
    background: var(--surface-3);
    border-radius: 6px;
    overflow: hidden;
    flex: 1;
}

.big-progress-fill {
    height: 100%;
    background: var(--text);
    border-radius: 6px;
    transition: width 0.3s ease;
}

.book-big-progress {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 20px;
}

.big-progress-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 700;
    min-width: 45px;
}

.book-page-stats {
    display: flex;
    justify-content: space-around;
    margin-bottom: 24px;
}

.page-stat {
    text-align: center;
}

.page-stat-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
}

.page-stat-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    margin-top: 4px;
}

.book-actions {
    display: flex;
    gap: 10px;
}

.book-action-btn {
    flex: 1;
    padding: 14px;
    border-radius: 10px;
    border: none;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
    background: var(--text);
    color: var(--bg);
}

.book-action-btn.secondary {
    background: var(--surface-2);
    color: var(--text);
}

/* Yearly Goal Ring */
.yearly-goal {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

.goal-progress-ring {
    width: 100px;
    height: 100px;
    position: relative;
    margin-bottom: 8px;
}

.goal-progress-ring svg {
    transform: rotate(-90deg);
    width: 100%;
    height: 100%;
}

.goal-progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
}

.goal-label {
    font-size: 12px;
    color: var(--text-muted);
}

/* Completed Books */
.completed-books-list {
    max-height: 300px;
    overflow-y: auto;
}

.completed-book-item {
    padding: 12px 0;
    border-bottom: 1px solid var(--border);
}

.completed-book-item:last-child { border-bottom: none; }

.completed-book-title {
    font-size: 14px;
    font-weight: 500;
    margin-bottom: 4px;
}

.completed-book-meta {
    font-size: 11px;
    color: var(--text-muted);
}

/* ==========================================
   ALCOHOL TRACKER
   ========================================== */

.alcohol-warning {
    background: linear-gradient(135deg, rgba(234, 179, 8, 0.1) 0%, rgba(234, 179, 8, 0.05) 100%);
    border-left: 3px solid var(--warning);
    border-radius: 0 10px 10px 0;
    padding: 14px;
    margin: 0 20px 12px;
}

.warning-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--warning);
    letter-spacing: 0.15em;
    margin-bottom: 6px;
}

.warning-text {
    font-size: 12px;
    color: var(--text-2);
    margin-bottom: 4px;
}

.warning-impact {
    font-size: 11px;
    color: var(--text-muted);
}

.alcohol-btn-container {
    margin: 0 20px 12px;
    text-align: center;
}

.alcohol-log-btn {
    background: transparent;
    border: 1px dashed var(--border);
    color: var(--text-muted);
    padding: 12px 24px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    cursor: pointer;
}

.alcohol-log-btn:active {
    background: var(--surface-2);
}

.alcohol-hint {
    display: block;
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 6px;
}

/* Alcohol Modal */
.warning-box {
    display: flex;
    align-items: center;
    gap: 12px;
    background: rgba(234, 179, 8, 0.1);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 20px;
}

.warning-icon {
    width: 28px;
    height: 28px;
    background: var(--warning);
    color: var(--bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 16px;
    flex-shrink: 0;
}

.warning-content {
    font-size: 12px;
    color: var(--text-2);
}

.drink-counter {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    margin-bottom: 8px;
}

.counter-btn {
    width: 48px;
    height: 48px;
    background: var(--surface-2);
    border: none;
    border-radius: 50%;
    font-size: 24px;
    color: var(--text);
    cursor: pointer;
}

.counter-btn:active {
    background: var(--surface-3);
}

.counter-input {
    width: 80px;
    background: transparent;
    border: none;
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    text-align: center;
    color: var(--text);
}

.counter-input:focus { outline: none; }

.counter-label {
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 20px;
}

.drink-types {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    margin-bottom: 20px;
}

.drink-type-btn {
    background: var(--surface-2);
    border: 2px solid transparent;
    color: var(--text);
    padding: 12px;
    border-radius: 8px;
    font-size: 13px;
    cursor: pointer;
}

.drink-type-btn.active {
    border-color: var(--text);
}

.science-facts {
    margin-bottom: 20px;
}

.science-fact {
    background: var(--surface-2);
    border-radius: 8px;
    padding: 12px;
    font-size: 11px;
    color: var(--text-muted);
    margin-bottom: 8px;
    line-height: 1.5;
}

.save-btn.danger {
    background: var(--error);
}

/* Impact Toast */
.impact-toast {
    position: fixed;
    bottom: 100px;
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--surface);
    border-left: 3px solid var(--error);
    padding: 14px 20px;
    border-radius: 0 10px 10px 0;
    font-size: 12px;
    color: var(--text);
    opacity: 0;
    transition: all 0.3s ease;
    z-index: 400;
    max-width: 90%;
    line-height: 1.4;
}

.impact-toast.visible {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* Alcohol Stats */
.alcohol-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 12px;
}

.alcohol-stat { text-align: center; }

.alcohol-stat-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
}

.alcohol-stat-label {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.05em;
    margin-top: 4px;
}

.recovery-warning {
    background: rgba(234, 179, 8, 0.1);
    border-radius: 8px;
    padding: 10px;
    font-size: 11px;
    color: var(--warning);
    text-align: center;
}

/* ==========================================
   SYNC INDICATOR
   ========================================== */

.sync-indicator {
    position: fixed;
    top: calc(8px + var(--safe-top));
    right: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    padding: 4px 8px;
    border-radius: 4px;
    z-index: 100;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.sync-indicator.syncing {
    opacity: 1;
    background: var(--surface-2);
    color: var(--text-muted);
}

.sync-indicator.syncing::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 6px;
    background: var(--text-muted);
    border-radius: 50%;
    margin-right: 6px;
    animation: pulse 1s infinite;
}

.sync-indicator.synced {
    opacity: 1;
    background: rgba(34, 197, 94, 0.15);
    color: var(--success);
    animation: fadeOut 2s forwards 1s;
}

.sync-indicator.synced::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 6px;
    background: var(--success);
    border-radius: 50%;
    margin-right: 6px;
}

.sync-indicator.error {
    opacity: 1;
    background: rgba(239, 68, 68, 0.15);
    color: var(--error);
}

.sync-indicator.error::before {
    content: '!';
    display: inline-block;
    width: 12px;
    font-weight: 700;
    margin-right: 4px;
}

.sync-indicator.offline {
    opacity: 1;
    background: var(--surface-2);
    color: var(--text-dim);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.4; }
}

@keyframes fadeOut {
    to { opacity: 0; }
}

/* ==========================================
   CLOUD SYNC UI
   ========================================== */

.cloud-setup-card {
    background: var(--surface);
    border-radius: 12px;
    padding: 18px;
    text-align: center;
}

.cloud-status {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    padding: 4px 10px;
    border-radius: 4px;
    display: inline-block;
}

.cloud-status.connected {
    background: rgba(34, 197, 94, 0.15);
    color: var(--success);
}

.cloud-status.offline {
    background: var(--surface-2);
    color: var(--text-muted);
}

/* ==========================================
   LIFT LOGGER
   ========================================== */

.lift-logger {
    max-height: 90vh;
}

.modal-header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
}

.modal-header-row .modal-title {
    flex: 1;
    text-align: center;
}

.modal-close {
    width: 36px;
    height: 36px;
    background: var(--surface-2);
    border: none;
    border-radius: 50%;
    font-size: 20px;
    color: var(--text-muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

.swap-exercise-btn {
    padding: 8px 12px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    letter-spacing: 0.05em;
}

.rest-timer {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 12px;
    margin-bottom: 12px;
    border-radius: 10px;
    background: var(--surface-2);
}

.rest-timer.rest-ok {
    background: rgba(100, 100, 100, 0.2);
}

.rest-timer.rest-ready {
    background: rgba(100, 200, 100, 0.15);
    border: 1px solid rgba(100, 200, 100, 0.3);
}

.rest-timer.rest-long {
    background: rgba(255, 150, 100, 0.15);
    border: 1px solid rgba(255, 150, 100, 0.3);
}

.rest-label {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    letter-spacing: 0.1em;
}

.rest-time {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
    color: var(--text);
}

.rest-reset {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 10px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
}

.alternatives-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 16px 0;
}

.alt-current {
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 8px;
    text-align: center;
}

.alt-option {
    width: 100%;
    padding: 14px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 10px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text);
    text-align: left;
    cursor: pointer;
}

.alt-option:active {
    background: var(--border);
}

.last-performance {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 12px;
}

.last-performance.empty {
    text-align: center;
}

.perf-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    display: block;
    margin-bottom: 8px;
}

.perf-value {
    font-size: 13px;
    color: var(--text-dim);
}

.perf-sets {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 8px;
}

.perf-set {
    background: var(--surface-3);
    padding: 6px 10px;
    border-radius: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
}

.perf-best {
    font-size: 12px;
    color: var(--text-muted);
}

.e1rm {
    color: var(--text-dim);
    font-size: 11px;
}

.pr-display {
    display: flex;
    align-items: center;
    gap: 12px;
    background: linear-gradient(135deg, rgba(234, 179, 8, 0.1) 0%, rgba(234, 179, 8, 0.05) 100%);
    border-radius: 10px;
    padding: 12px 14px;
    margin-bottom: 12px;
}

.pr-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 700;
    color: var(--warning);
    background: rgba(234, 179, 8, 0.2);
    padding: 4px 8px;
    border-radius: 4px;
}

.pr-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 700;
}

.pr-e1rm {
    font-size: 12px;
    color: var(--text-muted);
    margin-left: auto;
}

.suggestion-card {
    background: var(--surface-2);
    border-left: 3px solid var(--success);
    border-radius: 0 10px 10px 0;
    padding: 12px 14px;
    margin-bottom: 16px;
}

.suggestion-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--success);
    letter-spacing: 0.1em;
    display: block;
    margin-bottom: 4px;
}

.suggestion-target {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
    display: block;
    margin-bottom: 4px;
}

.suggestion-reason {
    font-size: 12px;
    color: var(--text-muted);
}

.set-inputs {
    margin-bottom: 16px;
    padding: 16px;
    border: 2px solid var(--success);
    border-radius: 12px;
    background: rgba(34, 197, 94, 0.05);
}

/* Custom Dialog (replaces native alert/confirm) */
.custom-dialog-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    padding: 20px;
}

.custom-dialog {
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    max-width: 300px;
    width: 100%;
    text-align: center;
}

.dialog-message {
    font-size: 15px;
    color: var(--text);
    margin-bottom: 24px;
    line-height: 1.5;
}

.dialog-buttons {
    display: flex;
    gap: 12px;
}

.dialog-btn {
    flex: 1;
    padding: 14px 20px;
    border-radius: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    cursor: pointer;
    border: none;
    transition: all 0.15s;
}

.dialog-btn-primary {
    background: var(--text);
    color: var(--bg);
}

.dialog-btn-cancel {
    background: var(--surface-3);
    color: var(--text-muted);
    border: 1px solid var(--border);
}

.dialog-btn-confirm {
    background: #ef4444;
    color: white;
}

.dialog-btn:active {
    transform: scale(0.98);
    opacity: 0.9;
}

.set-guidance {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 14px;
    padding: 10px 14px;
    background: var(--surface-2);
    border-radius: 8px;
}

.set-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 700;
    color: var(--text);
    background: var(--surface-3);
    padding: 4px 10px;
    border-radius: 6px;
}

.set-tip {
    font-size: 12px;
    color: var(--text-muted);
}

.input-row {
    display: flex;
    gap: 12px;
    margin-bottom: 10px;
}

.input-col {
    flex: 1;
    position: relative;
}

.input-col label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    display: block;
    margin-bottom: 6px;
}

.lift-input {
    width: 100%;
    background: var(--surface-2);
    border: 2px solid var(--border);
    border-radius: 10px;
    padding: 14px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
    color: var(--text);
    text-align: center;
}

.lift-input:focus {
    outline: none;
    border-color: var(--text);
}

.input-unit {
    position: absolute;
    right: 12px;
    bottom: 16px;
    font-size: 12px;
    color: var(--text-muted);
}

.quick-adjust {
    display: flex;
    justify-content: center;
    gap: 8px;
}

.quick-adjust button {
    background: var(--surface-2);
    border: none;
    color: var(--text);
    padding: 8px 14px;
    border-radius: 6px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    cursor: pointer;
}

.quick-adjust button:active {
    background: var(--surface-3);
}

.sets-list {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 16px;
    min-height: 60px;
}

.sets-list.empty {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-size: 12px;
}

.logged-set {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    margin-bottom: 8px;
    background: var(--surface-2);
    border-radius: 8px;
}

.logged-set:last-child {
    margin-bottom: 0;
}

.set-num {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-muted);
    letter-spacing: 0.1em;
    width: 50px;
}

.set-data {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 600;
    flex: 1;
}

.set-remove {
    width: 32px;
    height: 32px;
    background: rgba(239, 68, 68, 0.15);
    border: none;
    border-radius: 50%;
    color: #ef4444;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-left: auto;
    -webkit-tap-highlight-color: transparent;
}

.set-remove:active {
    background: rgba(239, 68, 68, 0.3);
}

.lift-actions {
    display: flex;
    gap: 10px;
}

.add-set-btn {
    flex: 1;
    background: var(--surface-2);
    border: 2px dashed var(--border);
    color: var(--text);
    padding: 14px;
    border-radius: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
}

.add-set-btn:active {
    background: var(--surface-3);
}

.lift-actions .save-btn {
    flex: 1;
}

.lift-actions .save-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

/* PR Celebration */
.pr-celebration {
    text-align: center;
    animation: prPop 0.5s ease;
}

@keyframes prPop {
    0% { transform: scale(0.8); opacity: 0; }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); opacity: 1; }
}

.pr-icon {
    font-family: 'JetBrains Mono', monospace;
    font-size: 48px;
    font-weight: 700;
    color: var(--warning);
    margin-bottom: 12px;
}

.pr-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    letter-spacing: 0.15em;
    color: var(--warning);
    margin-bottom: 8px;
}

.pr-lift {
    font-size: 16px;
    color: var(--text-muted);
    margin-bottom: 16px;
}

.pr-stats {
    margin-bottom: 16px;
}

.pr-new {
    font-family: 'JetBrains Mono', monospace;
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 8px;
}

.pr-old {
    font-size: 13px;
    color: var(--text-muted);
}

.pr-gain {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    color: var(--success);
    margin-top: 4px;
}

.pr-bonus {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    color: var(--success);
    background: rgba(34, 197, 94, 0.15);
    padding: 8px 16px;
    border-radius: 8px;
    display: inline-block;
}

/* ==========================================
   VOLUME TRACKER
   ========================================== */

.volume-total {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

.volume-grid {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 12px;
}

.volume-row {
    display: flex;
    align-items: center;
    gap: 12px;
}

.volume-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    width: 70px;
}

.volume-bar-container {
    flex: 1;
}

.volume-bar {
    height: 8px;
    background: var(--surface-3);
    border-radius: 4px;
    position: relative;
    overflow: visible;
}

.volume-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
}

.volume-fill.low {
    background: var(--text-dim);
}

.volume-fill.good {
    background: var(--text-muted);
}

.volume-fill.optimal {
    background: var(--success);
}

.volume-fill.high {
    background: var(--warning);
}

.volume-mev, .volume-mav {
    position: absolute;
    top: -2px;
    bottom: -2px;
    width: 2px;
    background: var(--text-dim);
    opacity: 0.5;
}

.volume-markers {
    display: flex;
    justify-content: space-between;
    font-size: 8px;
    color: var(--text-dim);
    margin-top: 2px;
    padding: 0 2px;
}

.volume-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 700;
    width: 30px;
    text-align: right;
}

.volume-count.low { color: var(--text-dim); }
.volume-count.good { color: var(--text-muted); }
.volume-count.optimal { color: var(--success); }
.volume-count.high { color: var(--warning); }

.volume-legend {
    display: flex;
    justify-content: space-around;
    font-size: 9px;
    color: var(--text-dim);
    padding-top: 8px;
    border-top: 1px solid var(--border);
}

/* ==========================================
   VOLUME ALERTS (Daily View)
   ========================================== */

.volume-alerts {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin: 0 20px 16px;
}

.volume-alert {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border-radius: 8px;
    font-size: 11px;
    line-height: 1.4;
}

.volume-alert.low {
    background: rgba(115, 115, 115, 0.15);
    border: 1px solid rgba(115, 115, 115, 0.3);
    color: var(--text-muted);
}

.volume-alert.warning {
    background: rgba(234, 179, 8, 0.1);
    border: 1px solid rgba(234, 179, 8, 0.3);
    color: var(--warning);
}

.volume-alert.high {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    color: var(--error);
}

.volume-alert .alert-icon {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 700;
    font-size: 12px;
    flex-shrink: 0;
}

.volume-alert .alert-text {
    flex: 1;
}

/* ==========================================
   DELOAD WARNING
   ========================================== */

.deload-warning {
    background: linear-gradient(135deg, rgba(234, 179, 8, 0.1) 0%, rgba(234, 179, 8, 0.05) 100%);
    border: 1px solid rgba(234, 179, 8, 0.3);
    border-radius: 12px;
    padding: 16px;
    margin: 0 20px 16px;
}

.deload-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.deload-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
    color: var(--warning);
}

.deload-weeks {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text-muted);
}

.deload-reason {
    font-size: 13px;
    color: var(--text-2);
    margin-bottom: 14px;
    line-height: 1.4;
}

.deload-actions {
    display: flex;
    gap: 10px;
}

.deload-btn {
    flex: 1;
    background: var(--warning);
    color: var(--bg);
    border: none;
    padding: 12px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
}

.deload-skip {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: 12px 16px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    cursor: pointer;
}

/* ==========================================
   PHYSIQUE PRIORITY & POSTURE SETTINGS
   ========================================== */

.priority-hint,
.posture-hint {
    font-size: 11px;
    color: var(--text-muted);
    padding: 8px 12px;
    background: var(--surface);
    border-radius: 6px;
    margin-top: 8px;
}

.priority-options,
.posture-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 50vh;
    overflow-y: auto;
}

.priority-check,
.posture-check {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 14px;
    background: var(--surface);
    border-radius: 10px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.15s ease;
}

.priority-check:active,
.posture-check:active {
    transform: scale(0.98);
}

.priority-check.active,
.posture-check.active {
    border-color: var(--text);
    background: var(--surface-2);
}

.priority-check input,
.posture-check input {
    margin-top: 2px;
    width: 18px;
    height: 18px;
    accent-color: var(--text);
}

.priority-info,
.posture-info {
    display: flex;
    flex-direction: column;
    gap: 2px;
    flex: 1;
}

.priority-name,
.posture-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
}

.priority-desc,
.posture-desc {
    font-size: 12px;
    color: var(--text-muted);
}

.posture-focus {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 4px;
}

/* ==========================================
   PERIODIZATION ALERTS
   ========================================== */

.periodization-alerts {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin: 0 20px 16px;
}

.periodization-alert {
    background: linear-gradient(135deg, rgba(234, 179, 8, 0.12) 0%, rgba(234, 179, 8, 0.05) 100%);
    border: 1px solid rgba(234, 179, 8, 0.4);
    border-radius: 12px;
    padding: 16px;
    position: relative;
}

.periodization-alert.diet-break,
.periodization-alert.metabolic-adaptation {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(239, 68, 68, 0.05) 100%);
    border-color: rgba(239, 68, 68, 0.4);
}

.periodization-alert .alert-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.1em;
    color: var(--warning);
    margin-bottom: 8px;
}

.periodization-alert.diet-break .alert-title,
.periodization-alert.metabolic-adaptation .alert-title {
    color: var(--error);
}

.periodization-alert .alert-desc {
    font-size: 13px;
    color: var(--text-2);
    line-height: 1.5;
    margin-bottom: 10px;
}

.periodization-alert .alert-action {
    font-size: 12px;
    color: var(--text);
    font-weight: 500;
    padding: 10px 14px;
    background: var(--surface);
    border-radius: 8px;
    display: inline-block;
}

.periodization-alert .alert-dismiss {
    position: absolute;
    top: 12px;
    right: 12px;
    background: transparent;
    border: none;
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    color: var(--text-dim);
    cursor: pointer;
    padding: 4px;
}

/* ==========================================
   PROGRESS FORECAST
   ========================================== */

.forecast-rate {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
}

.forecast-rate.negative {
    color: var(--success);
}

.forecast-rate.positive {
    color: var(--warning);
}

.forecast-message {
    font-size: 13px;
    color: var(--text-2);
    line-height: 1.5;
    text-align: center;
    padding: 16px;
    background: var(--surface);
    border-radius: 8px;
    margin-bottom: 14px;
}

.forecast-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.forecast-item {
    text-align: center;
    padding: 12px;
    background: var(--surface);
    border-radius: 8px;
}

.forecast-label {
    font-size: 10px;
    color: var(--text-dim);
    margin-bottom: 4px;
}

.forecast-weight {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
}

/* ==========================================
   AI NUTRITION LOGGER
   ========================================== */

.ai-log-btn {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.1em;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
}

.ai-log-btn:active {
    transform: scale(0.95);
    opacity: 0.8;
}

/* Saved Meals Section */
.saved-meals-section {
    margin-bottom: 16px;
    padding: 12px;
    background: var(--surface-2);
    border-radius: 10px;
}

.saved-meals-header {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-bottom: 10px;
}

.saved-meals-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.saved-meal-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    background: var(--surface);
    border-radius: 8px;
}

.saved-meal-info {
    flex: 1;
    cursor: pointer;
}

.saved-meal-name {
    display: block;
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 2px;
}

.saved-meal-macros {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

.saved-meal-delete {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: none;
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Save Meal Button */
.save-meal-btn {
    padding: 10px 16px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    cursor: pointer;
}

/* Save Meal Dialog */
.save-meal-dialog {
    padding: 24px !important;
}

.save-meal-input-section {
    margin: 24px 0;
}

.save-meal-input-section label {
    display: block;
    font-size: 12px;
    color: var(--text-muted);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.save-meal-input-section input {
    width: 100%;
    padding: 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
}

.save-meal-input-section input:focus {
    outline: none;
    border-color: var(--accent);
}

.save-meal-input-section input::placeholder {
    color: var(--text-dim);
}

.save-meal-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

.save-meal-actions .cancel-btn {
    flex: 1;
    padding: 14px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    cursor: pointer;
}

.save-meal-actions .save-btn {
    flex: 1;
    padding: 14px;
    background: var(--accent);
    border: none;
    border-radius: 8px;
    color: var(--bg);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
}

/* Dark input global style */
.dark-input {
    background: var(--surface) !important;
    border: 1px solid var(--border) !important;
    color: var(--text) !important;
    color-scheme: dark;
}

.dark-input:focus {
    border-color: var(--accent) !important;
    outline: none;
}

/* Run adjustment card */
.run-adjustment-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
    margin: 16px 0;
    text-align: center;
}

.adjustment-message {
    color: var(--text);
    font-size: 14px;
}

/* Meal Delete Button */
.meal-header-right {
    display: flex;
    align-items: center;
    gap: 8px;
}

.meal-delete-btn {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: none;
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
    font-size: 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.7;
}

.meal-delete-btn:active {
    opacity: 1;
}

.log-goal {
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 2px;
}

.ai-logger {
    padding-bottom: 30px;
}

.ai-input-section {
    margin-bottom: 20px;
}

.ai-food-input {
    width: 100%;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px;
    color: var(--text);
    font-size: 14px;
    font-family: inherit;
    resize: none;
    margin-bottom: 12px;
}

.ai-food-input::placeholder {
    color: var(--text-dim);
}

.ai-food-input:focus {
    outline: none;
    border-color: var(--text-muted);
}

.analyze-btn {
    width: 100%;
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    color: white;
    border: none;
    padding: 14px;
    border-radius: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
    transition: all 0.15s;
}

.analyze-btn:active {
    transform: scale(0.98);
}

.ai-results {
    background: var(--surface);
    border-radius: 12px;
    padding: 16px;
}

.results-header {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.food-items {
    margin-bottom: 16px;
}

.food-item-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
}

.food-item-row:last-child {
    border-bottom: none;
}

.item-name {
    font-size: 13px;
    color: var(--text);
}

.item-macros {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-muted);
}

.item-macros-edit {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 2px;
}

.item-cal-input,
.item-protein-input {
    width: 45px;
    padding: 4px 6px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 4px;
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    text-align: right;
    -webkit-appearance: none;
    -moz-appearance: textfield;
}

.item-cal-input:focus,
.item-protein-input:focus {
    outline: none;
    border-color: var(--primary);
    background: var(--bg);
}

.item-cal-input::-webkit-inner-spin-button,
.item-cal-input::-webkit-outer-spin-button,
.item-protein-input::-webkit-inner-spin-button,
.item-protein-input::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.edit-hint {
    font-size: 10px;
    color: var(--text-muted);
    font-weight: normal;
    margin-left: 8px;
}

.food-items.editable .food-item-row {
    padding: 10px 0;
}

.totals-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    padding: 14px;
    background: var(--surface-2);
    border-radius: 10px;
    margin-bottom: 14px;
}

.total-item {
    text-align: center;
}

.total-item.highlight {
    background: rgba(139, 92, 246, 0.15);
    border-radius: 8px;
    padding: 8px 4px;
    margin: -8px -4px;
}

.total-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
}

.total-item.highlight .total-value {
    color: #a78bfa;
}

.total-label {
    font-size: 9px;
    color: var(--text-dim);
    letter-spacing: 0.05em;
    margin-top: 2px;
}

.ai-notes {
    font-size: 12px;
    color: var(--text-muted);
    font-style: italic;
    text-align: center;
    margin-bottom: 14px;
}

.results-actions {
    display: flex;
    gap: 10px;
}

.edit-result-btn {
    flex: 1;
    background: var(--surface-2);
    border: 1px solid var(--border);
    color: var(--text-muted);
    padding: 12px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
}

.log-result-btn {
    flex: 2;
    background: var(--success);
    border: none;
    color: var(--bg);
    padding: 12px;
    border-radius: 8px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
}

.edit-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
    margin-bottom: 16px;
}

.edit-item label {
    display: block;
    font-size: 10px;
    color: var(--text-dim);
    margin-bottom: 6px;
    letter-spacing: 0.05em;
}

.ai-error {
    margin-top: 16px;
}

.error-message {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 8px;
    color: var(--error);
    font-size: 12px;
}

.error-icon {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 700;
}

/* ==========================================
   TOAST NOTIFICATION
   ========================================== */

.toast-notification {
    position: fixed;
    bottom: calc(90px + var(--safe-bottom));
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--success);
    color: var(--bg);
    padding: 12px 24px;
    border-radius: 10px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s ease;
    z-index: 1000;
}

.toast-notification.active {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

/* ==========================================
   NUTRITION PROGRESS PREVIEW (AI Logger)
   ========================================== */

.progress-preview {
    display: flex;
    flex-direction: column;
    gap: 6px;
    padding: 12px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-bottom: 14px;
    font-size: 12px;
    text-align: center;
}

.preview-good { color: var(--success); }
.preview-caution { color: var(--warning); }
.preview-warning { color: var(--error); }

.protein-good { color: var(--success); }
.protein-ok { color: var(--text-muted); }
.protein-low { color: var(--warning); }

/* ==========================================
   LOG CARD STATES
   ========================================== */

.log-card.goal-hit {
    border: 1px solid var(--success);
    background: rgba(34, 197, 94, 0.08);
}

.log-card.goal-low {
    border: 1px solid var(--warning);
    background: rgba(234, 179, 8, 0.05);
}

.log-card.goal-over {
    border: 1px solid var(--error);
    background: rgba(239, 68, 68, 0.08);
}

.log-card.goal-close {
    border: 1px solid var(--warning);
    background: rgba(234, 179, 8, 0.05);
}

.log-unit {
    font-size: 14px;
    color: var(--text-muted);
}

.log-progress {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 2px;
}

/* ==========================================
   MACRO PROGRESS BARS
   ========================================== */

.macro-progress-bars {
    margin-top: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.macro-bar-row {
    display: flex;
    align-items: center;
    gap: 10px;
}

.macro-bar-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    width: 28px;
}

.macro-bar {
    flex: 1;
    height: 6px;
    background: var(--surface-2);
    border-radius: 3px;
    overflow: hidden;
}

.macro-fill {
    height: 100%;
    background: var(--text-muted);
    border-radius: 3px;
    transition: width 0.3s ease;
}

.macro-fill.over {
    background: var(--error);
}

.macro-fill.protein {
    background: linear-gradient(90deg, #8b5cf6, #a78bfa);
}

.macro-fill.protein.complete {
    background: var(--success);
}

.macro-bar-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    width: 32px;
    text-align: right;
}

/* ==========================================
   FOOD VIEW
   ========================================== */

#food-view {
    padding: 20px 16px;
    padding-bottom: 100px;
}

.food-summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background: var(--surface);
    border-radius: 16px;
    border: 1px solid var(--border);
    margin-bottom: 16px;
}

.summary-main {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.summary-calories {
    display: flex;
    align-items: baseline;
    gap: 8px;
}

.cal-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 32px;
    font-weight: 600;
    color: var(--text);
}

.cal-label {
    font-size: 14px;
    color: var(--text-dim);
}

.summary-status {
    font-size: 12px;
    color: var(--text-muted);
}

.summary-status.over { color: var(--error); }
.summary-status.close { color: var(--warning); }
.summary-status.good { color: var(--success); }

.summary-ring {
    position: relative;
    width: 70px;
    height: 70px;
}

.summary-ring svg {
    transform: rotate(-90deg);
}

.ring-bg {
    fill: none;
    stroke: var(--surface-2);
    stroke-width: 8;
}

.ring-fill {
    fill: none;
    stroke: var(--text);
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dashoffset 0.5s ease;
}

.ring-percent {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
}

/* Macro Breakdown */
.macro-breakdown {
    background: var(--surface);
    border-radius: 12px;
    border: 1px solid var(--border);
    padding: 16px;
    margin-bottom: 16px;
}

.macro-item {
    margin-bottom: 12px;
}

.macro-item:last-child {
    margin-bottom: 0;
}

.macro-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 6px;
}

.macro-name {
    font-size: 11px;
    letter-spacing: 0.1em;
    color: var(--text-muted);
}

.macro-values {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text-dim);
}

.macro-bar-full {
    height: 8px;
    background: var(--surface-2);
    border-radius: 4px;
    overflow: hidden;
}

.macro-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
}

/* Meal Log */
.meal-log {
    background: var(--surface);
    border-radius: 12px;
    border: 1px solid var(--border);
    padding: 16px;
    margin-bottom: 16px;
}

.meal-log.empty {
    text-align: center;
    padding: 32px 16px;
}

.empty-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-muted);
    margin-bottom: 6px;
}

.empty-text {
    font-size: 12px;
    color: var(--text-dim);
    margin-bottom: 16px;
}

.meal-count {
    font-size: 11px;
    color: var(--text-dim);
}

.meals-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.meal-item {
    padding: 12px;
    background: var(--surface-2);
    border-radius: 8px;
}

.meal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.meal-time {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
}

.quality-badge {
    font-size: 9px;
    letter-spacing: 0.1em;
    padding: 2px 6px;
    border-radius: 4px;
}

.quality-badge.good {
    background: rgba(34, 197, 94, 0.15);
    color: var(--success);
}

.quality-badge.ok {
    background: rgba(234, 179, 8, 0.15);
    color: var(--warning);
}

.quality-badge.poor {
    background: rgba(239, 68, 68, 0.15);
    color: var(--error);
}

.meal-items {
    font-size: 13px;
    color: var(--text);
    margin-bottom: 8px;
    line-height: 1.4;
}

.meal-food {
    color: var(--text);
}

.meal-macros {
    display: flex;
    gap: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
}

.meal-insight {
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--border);
    font-size: 11px;
    color: var(--text-muted);
    font-style: italic;
}

.meal-actions {
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
}

.save-preset-btn {
    background: transparent;
    border: 1px solid var(--primary);
    color: var(--primary);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 10px;
    font-weight: 600;
    letter-spacing: 0.5px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.save-preset-btn:hover {
    background: var(--primary);
    color: white;
}

.meal-saved-badge {
    font-size: 10px;
    color: var(--success);
    font-weight: 600;
    letter-spacing: 0.5px;
}

/* Food Insights */
.food-insights {
    background: var(--surface);
    border-radius: 12px;
    border: 1px solid var(--border);
    padding: 16px;
    margin-bottom: 16px;
}

.insights-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.insight-item {
    display: flex;
    gap: 10px;
    padding: 10px;
    background: var(--surface-2);
    border-radius: 8px;
}

.insight-icon {
    font-family: 'JetBrains Mono', monospace;
    font-weight: 700;
    width: 20px;
    text-align: center;
    flex-shrink: 0;
}

.insight-item.good .insight-icon { color: var(--success); }
.insight-item.warning .insight-icon { color: var(--warning); }
.insight-item.alert .insight-icon { color: var(--error); }
.insight-item.neutral .insight-icon { color: var(--text-dim); }

.insight-text {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.4;
}

/* Quick Log Section */
.quick-log-section {
    margin-top: 16px;
}

.ai-log-btn.full {
    width: 100%;
    padding: 16px;
    font-size: 14px;
    background: var(--text);
    color: var(--bg);
    border: none;
    border-radius: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    cursor: pointer;
}

/* Quick Add Saved Meals */
.quick-add-section {
    margin-top: 16px;
}

.quick-add-section .section-header {
    margin-bottom: 12px;
}

.saved-meals-grid {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.quick-meal-btn {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 14px 16px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    transition: all 0.15s ease;
}

.quick-meal-btn:active {
    transform: scale(0.98);
    background: var(--border);
}

.quick-meal-name {
    font-weight: 600;
    color: var(--text);
    font-size: 14px;
}

.quick-meal-macros {
    font-size: 12px;
    color: var(--text-dim);
    font-weight: 500;
}

.quick-meal-item {
    display: flex;
    align-items: stretch;
    gap: 0;
}

.quick-meal-item .quick-meal-btn {
    flex: 1;
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.quick-meal-delete {
    padding: 0 16px;
    background: var(--error);
    border: none;
    border-radius: 0 10px 10px 0;
    color: white;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.15s ease;
}

.quick-meal-delete:active {
    opacity: 0.8;
}

.quick-meal-delete.hidden {
    display: none;
}

.saved-meals-grid.edit-mode .quick-meal-item .quick-meal-btn {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

.ai-log-btn.large {
    padding: 14px 28px;
    font-size: 13px;
}

/* Alcohol Warning in AI Nutrition */
.alcohol-warning {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    padding: 12px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.3);
    border-radius: 8px;
    margin-bottom: 12px;
}

.alcohol-icon {
    font-weight: 700;
    color: var(--error);
    width: 20px;
    text-align: center;
    flex-shrink: 0;
}

.alcohol-text {
    font-size: 12px;
    color: var(--error);
    line-height: 1.4;
}

/* ==========================================
   MEAL TIME SELECTOR
   ========================================== */

.meal-time-selector {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
}

.meal-time-btn {
    flex: 1;
    padding: 10px 6px;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.meal-time-btn.active {
    background: var(--text);
    border-color: var(--text);
}

.meal-time-btn.active .time-icon,
.meal-time-btn.active .time-range {
    color: var(--bg);
}

.time-icon {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    color: var(--text);
}

.time-range {
    font-size: 9px;
    color: var(--text-dim);
}

/* ==========================================
   LEUCINE INDICATOR
   ========================================== */

.leucine-indicator {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 14px;
    border-radius: 8px;
    margin-bottom: 12px;
}

.leucine-indicator.good {
    background: rgba(34, 197, 94, 0.1);
    border: 1px solid rgba(34, 197, 94, 0.3);
}

.leucine-indicator.low {
    background: rgba(234, 179, 8, 0.1);
    border: 1px solid rgba(234, 179, 8, 0.3);
}

.leucine-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    font-weight: 600;
}

.leucine-indicator.good .leucine-value { color: var(--success); }
.leucine-indicator.low .leucine-value { color: var(--warning); }

.leucine-status {
    font-size: 11px;
}

.leucine-indicator.good .leucine-status { color: var(--success); }
.leucine-indicator.low .leucine-status { color: var(--warning); }

/* ==========================================
   AI BRIEFING CARD
   ========================================== */

.ai-briefing-card {
    background: linear-gradient(135deg, var(--surface) 0%, var(--surface-2) 100%);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
}

.ai-briefing-card.morning {
    border-left: 3px solid #60a5fa;
}

.ai-briefing-card.evening {
    border-left: 3px solid #a78bfa;
}

.ai-briefing-card.loading {
    border-left: 3px solid var(--text-dim);
    animation: pulse 1.5s ease-in-out infinite;
}

.ai-briefing-card.error {
    border-left: 3px solid var(--warning);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

.briefing-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

.briefing-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
}

.briefing-ai {
    font-family: 'JetBrains Mono', monospace;
    font-size: 9px;
    padding: 2px 6px;
    background: var(--surface-2);
    border-radius: 4px;
    color: var(--text-muted);
}

.briefing-message {
    font-size: 14px;
    line-height: 1.5;
    color: var(--text);
    margin: 0;
}

/* ==========================================
   PROTEIN DISTRIBUTION
   ========================================== */

.dist-grade {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 700;
    padding: 4px 10px;
    border-radius: 6px;
}

.dist-grade.grade-a { background: rgba(34, 197, 94, 0.2); color: var(--success); }
.dist-grade.grade-b { background: rgba(96, 165, 250, 0.2); color: #60a5fa; }
.dist-grade.grade-c { background: rgba(234, 179, 8, 0.2); color: var(--warning); }
.dist-grade.grade-d { background: rgba(239, 68, 68, 0.2); color: var(--error); }

.dist-bar-container {
    display: flex;
    gap: 4px;
    margin: 16px 0 10px;
}

.dist-segment {
    background: var(--surface-2);
    border-radius: 8px;
    padding: 12px 8px;
    text-align: center;
    min-width: 50px;
}

.dist-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-bottom: 4px;
}

.dist-percent {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 600;
    color: var(--text);
}

.dist-ideal {
    text-align: center;
    font-size: 11px;
    color: var(--text-dim);
    margin-bottom: 12px;
}

.leucine-stats {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-bottom: 12px;
}

.leucine-label {
    font-size: 11px;
    color: var(--text-muted);
}

.leucine-count {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
}

.leucine-target {
    font-size: 10px;
    color: var(--text-dim);
}

.dist-suggestions {
    border-top: 1px solid var(--border);
    padding-top: 12px;
}

.dist-suggestion {
    font-size: 12px;
    color: var(--warning);
    padding: 8px 10px;
    background: rgba(234, 179, 8, 0.08);
    border-radius: 6px;
    margin-bottom: 6px;
}

.dist-suggestion:last-child {
    margin-bottom: 0;
}

/* ==========================================
   CORRELATIONS
   ========================================== */

.correlations-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.correlation-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: var(--surface-2);
    border-radius: 8px;
}

.correlation-item.positive { border-left: 3px solid var(--success); }
.correlation-item.warning { border-left: 3px solid var(--warning); }
.correlation-item.neutral { border-left: 3px solid var(--text-muted); }

.corr-stat {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
    color: var(--text);
    min-width: 60px;
}

.corr-text {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.4;
}

/* ==========================================
   FUN STATS
   ========================================== */

.fun-stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

.fun-stat-item {
    text-align: center;
    padding: 12px 6px;
    background: var(--surface-2);
    border-radius: 8px;
}

.fun-stat-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 16px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 4px;
}

.fun-stat-label {
    font-size: 8px;
    letter-spacing: 0.05em;
    color: var(--text-dim);
    line-height: 1.2;
}

/* ==========================================
   ALL-TIME STATS
   ========================================== */

.alltime-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
}

.alltime-item {
    text-align: center;
}

.alltime-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 24px;
    font-weight: 700;
    color: var(--text);
}

.alltime-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-top: 4px;
}

/* Profile Macros Breakdown */
.macros-breakdown {
    display: flex;
    gap: 12px;
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
}

.macro-goal {
    flex: 1;
    text-align: center;
    padding: 10px;
    background: var(--surface-2);
    border-radius: 8px;
}

.macro-label {
    display: block;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-bottom: 4px;
}

.macro-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
}

/* Macro inputs in edit modal */
.macro-inputs-row {
    display: flex;
    gap: 10px;
    margin-bottom: 14px;
}

.input-group.compact {
    flex: 1;
    margin-bottom: 0;
}

.input-group.compact label {
    font-size: 10px;
}

.input-group.compact .input-field {
    padding: 10px;
    font-size: 14px;
}

.recalc-btn {
    width: 100%;
    padding: 12px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-size: 11px;
    letter-spacing: 0.1em;
    margin-bottom: 14px;
}

/* ==========================================
   NUTRITION SUMMARY CARD (Daily View)
   ========================================== */

.nutrition-summary-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
    cursor: pointer;
    transition: border-color 0.2s ease;
}

.nutrition-summary-card:active {
    border-color: var(--text-muted);
}

.nutri-row {
    display: flex;
    gap: 20px;
}

.nutri-item {
    flex: 1;
}

.nutri-label {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    display: block;
    margin-bottom: 4px;
}

.nutri-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
}

.nutri-goal {
    font-size: 12px;
    color: var(--text-dim);
    font-weight: 400;
}

.nutri-bar {
    height: 4px;
    background: var(--surface-2);
    border-radius: 2px;
    margin-top: 8px;
    overflow: hidden;
}

.nutri-fill {
    height: 100%;
    background: var(--text-muted);
    border-radius: 2px;
    transition: width 0.3s ease;
}

.nutri-fill.over {
    background: var(--error);
}

.nutri-fill.protein {
    background: #a78bfa;
}

.nutri-fill.protein.hit {
    background: var(--success);
}

.nutri-hint {
    text-align: center;
    font-size: 10px;
    color: var(--text-dim);
    margin-top: 12px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
}

/* ==========================================
   RECOVERY LOGGER
   ========================================== */

.recovery-header {
    text-align: center;
    margin-bottom: 20px;
}

.recovery-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    color: var(--text-dim);
    margin-bottom: 8px;
    text-transform: uppercase;
}

.recovery-exercise {
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
}

.recovery-instruction {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 14px 16px;
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 20px;
    line-height: 1.5;
}

.recovery-section {
    margin-bottom: 20px;
}

.recovery-section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.recovery-section-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
}

.recovery-select-all {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.05em;
    color: var(--accent);
    background: none;
    border: 1px solid var(--accent);
    border-radius: 6px;
    padding: 6px 10px;
    cursor: pointer;
}

.recovery-areas {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.recovery-area-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 16px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.recovery-area-item:active {
    transform: scale(0.98);
}

.recovery-area-item.selected {
    border-color: var(--accent);
    background: rgba(212, 175, 55, 0.1);
}

.recovery-area-item.recommended {
    border-left: 3px solid var(--accent);
}

.recovery-area-item .area-check {
    width: 22px;
    height: 22px;
    border: 2px solid var(--border);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.15s ease;
}

.recovery-area-item .area-check svg {
    width: 14px;
    height: 14px;
    opacity: 0;
    stroke: var(--accent);
    transition: opacity 0.15s ease;
}

.recovery-area-item.selected .area-check {
    border-color: var(--accent);
    background: var(--accent);
}

.recovery-area-item.selected .area-check svg {
    opacity: 1;
    stroke: var(--bg);
}

.recovery-area-item .area-info {
    flex: 1;
    min-width: 0;
}

.recovery-area-item .area-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text);
}

.recovery-area-item .area-reason {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 2px;
}

.recovery-area-item .area-fatigue {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    font-weight: 600;
    padding: 4px 8px;
    border-radius: 6px;
    flex-shrink: 0;
}

.recovery-area-item .area-fatigue.high {
    background: rgba(239, 68, 68, 0.2);
    color: var(--error);
}

.recovery-area-item .area-fatigue.medium {
    background: rgba(234, 179, 8, 0.2);
    color: var(--warning);
}

.recovery-area-item .area-fatigue.low {
    background: var(--surface-2);
    color: var(--text-dim);
}

.recovery-science {
    font-size: 11px;
    color: var(--text-dim);
    text-align: center;
    padding: 12px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-bottom: 20px;
    font-style: italic;
}

.recovery-actions {
    padding-top: 10px;
}

/* Default state - subtle gray for SKIP */
.recovery-complete-btn {
    width: 100%;
    padding: 16px;
    background: var(--surface-3);
    color: var(--text-muted);
    border: 1px solid var(--border);
    border-radius: 12px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.1em;
    cursor: pointer;
    transition: all 0.15s ease;
}

/* When there's data to save - white button */
.recovery-complete-btn.has-data {
    background: var(--text);
    color: var(--bg);
    border-color: var(--text);
}

.recovery-complete-btn:active {
    transform: scale(0.98);
}

/* Recovery modal - duration */
.recovery-duration {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 8px;
}

/* Recovery modal - targets */
.recovery-targets {
    margin-bottom: 16px;
}

.targets-label,
.technique-label,
.posture-benefit-label {
    font-family: 'JetBrains Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--text-dim);
    margin-bottom: 8px;
}

.targets-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.target-tag {
    background: var(--surface-2);
    border: 1px solid var(--border);
    color: var(--text);
    font-size: 12px;
    padding: 6px 12px;
    border-radius: 20px;
}

/* Recovery modal - technique */
.recovery-technique {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 14px 16px;
    margin-bottom: 16px;
}

.technique-text {
    font-size: 13px;
    color: var(--text);
    line-height: 1.5;
}

/* Recovery modal - posture benefit */
.posture-benefit {
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 16px;
    margin-bottom: 16px;
}

.posture-benefit-text {
    font-size: 13px;
    color: var(--text);
    line-height: 1.5;
}

/* Recovery set logging */
.recovery-log-section {
    margin: 16px 0;
    padding: 14px;
    background: var(--surface-2);
    border-radius: 10px;
    border: 1px solid var(--border);
}

.recovery-input-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
}

.recovery-input {
    flex: 1;
    max-width: 100px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px;
    font-size: 18px;
    font-family: 'JetBrains Mono', monospace;
    color: var(--text);
    text-align: center;
    -moz-appearance: textfield;
}

/* Hide number input spinners */
.recovery-input::-webkit-outer-spin-button,
.recovery-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.recovery-input:focus {
    border-color: var(--accent);
    outline: none;
}

.recovery-input-unit {
    font-size: 14px;
    color: var(--text-muted);
    min-width: 40px;
}

.recovery-add-btn {
    background: var(--surface-3);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px 16px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
}

.recovery-add-btn:active {
    background: var(--surface-2);
    transform: scale(0.98);
}

/* Logged sets display */
.logged-sets-container {
    margin-top: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.logged-set-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background: var(--surface);
    border-radius: 8px;
    border: 1px solid var(--accent);
}

.set-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.1em;
    color: var(--accent);
    font-weight: 600;
}

.set-value {
    flex: 1;
    font-size: 15px;
    color: var(--text);
}

.set-remove {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 20px;
    cursor: pointer;
    padding: 0 4px;
}

.set-remove:hover {
    color: var(--error);
}

/* ==========================================
   CARDIO LOGGER
   ========================================== */

/* Cardio Logger - Compact */
.cardio-logger {
    width: 100%;
    padding: 16px;
}

.cardio-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
}

.cardio-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 0.05em;
}

.cardio-rx {
    font-size: 12px;
    color: var(--text-muted);
}

/* Workout Type Row */
.workout-type-row {
    display: flex;
    gap: 6px;
    margin-bottom: 16px;
}

/* Workout type buttons in cardio logger */
.cardio-logger .wt-btn {
    flex: 1;
    padding: 12px 8px;
    background: transparent;
    border: 1px solid var(--border);
    border-radius: 8px;
    color: var(--text-muted);
    font-size: 12px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
}

.cardio-logger .wt-btn.active {
    background: var(--text);
    color: var(--bg);
    border-color: var(--text);
    font-weight: 600;
}

/* Inputs Row */
.cardio-row {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
}

.cardio-input-group {
    flex: 1;
}

.cardio-input-group label {
    display: block;
    font-size: 9px;
    color: var(--text-dim);
    margin-bottom: 4px;
    letter-spacing: 0.05em;
}

.cardio-input-group input {
    width: 100%;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 10px 8px;
    font-size: 16px;
    font-family: 'JetBrains Mono', monospace;
    color: var(--text);
    text-align: center;
    -moz-appearance: textfield;
}

.cardio-input-group input::-webkit-outer-spin-button,
.cardio-input-group input::-webkit-inner-spin-button {
    -webkit-appearance: none;
}

.cardio-input-group input:focus {
    outline: none;
    border-color: var(--text-muted);
}

.pace-line {
    font-size: 11px;
    color: var(--text-muted);
    text-align: center;
    margin-bottom: 10px;
    min-height: 14px;
}

/* Effort Section */
.effort-section {
    margin-bottom: 12px;
}

.effort-section label {
    display: block;
    font-size: 9px;
    color: var(--text-dim);
    margin-bottom: 6px;
    letter-spacing: 0.05em;
}

.effort-row {
    display: flex;
    gap: 4px;
}

.eff-btn {
    flex: 1;
    padding: 10px 0;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 6px;
    color: var(--text-muted);
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
}

.eff-btn.default {
    border-color: var(--text-dim);
    color: var(--text);
}

.eff-btn.active {
    background: var(--accent);
    color: var(--bg);
    border-color: var(--accent);
}

.effort-hints {
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
    font-size: 9px;
    color: var(--text-dim);
    padding: 0 2px;
}

/* Pain Row */
.pain-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    background: var(--surface-2);
    border-radius: 8px;
    margin-bottom: 8px;
    cursor: pointer;
}

.pain-row #pain-summary {
    font-size: 12px;
    color: var(--text-muted);
}

.pain-row .toggle-arrow {
    font-size: 10px;
    color: var(--text-dim);
}

.pain-panel {
    margin-bottom: 12px;
}

.pain-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.pain-chip {
    padding: 6px 10px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    color: var(--text-muted);
    font-size: 11px;
    cursor: pointer;
}

.pain-chip.selected {
    background: var(--error);
    color: white;
    border-color: var(--error);
}

#pain-warning {
    margin-top: 8px;
}

.injury-warning {
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid var(--error);
    border-radius: 6px;
    padding: 10px;
    font-size: 11px;
}

.injury-warning strong {
    color: var(--error);
}

/* Save Button */
/* Effort Slider - Apple style */
.effort-section {
    margin: 16px 0;
}

.effort-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.effort-header label {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-dim);
    letter-spacing: 0.1em;
}

.effort-value {
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 600;
    color: var(--text);
}

.effort-slider {
    width: 100%;
    height: 6px;
    -webkit-appearance: none;
    appearance: none;
    background: var(--surface-3);
    border-radius: 3px;
    outline: none;
}

.effort-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    background: var(--text);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

.effort-slider::-moz-range-thumb {
    width: 24px;
    height: 24px;
    background: var(--text);
    border-radius: 50%;
    cursor: pointer;
    border: none;
}

.effort-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 8px;
    font-size: 11px;
    color: var(--text-dim);
}

.cardio-save-btn {
    width: 100%;
    padding: 16px;
    background: var(--text);
    color: var(--bg);
    border: none;
    border-radius: var(--radius-md);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s ease;
    margin-top: 16px;
}

.cardio-save-btn:active {
    transform: scale(0.98);
    opacity: 0.9;
}

/* ==========================================
   INJURY INTELLIGENCE
   ========================================== */

/* Injury Alert in CardioLogger */
.injury-alert {
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 16px;
    font-size: 12px;
    line-height: 1.4;
    background: var(--surface-2);
    border: 1px solid var(--border);
    color: var(--text-muted);
}

.injury-alert.mild,
.injury-alert.moderate {
    /* Keep subtle for mild/moderate */
}

.injury-alert.severe {
    border-color: var(--error);
}

.injury-alert strong {
    display: block;
    margin-bottom: 4px;
    color: var(--text);
}

/* Injury Dashboard */
.injury-dashboard {
    background: var(--surface-2);
    border-radius: 10px;
    padding: 14px;
    margin-bottom: 16px;
}

.injury-dashboard.empty {
    text-align: center;
}

.injury-status {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.05em;
    padding: 6px 10px;
    border-radius: 6px;
    display: inline-block;
    margin-bottom: 8px;
}

.injury-status.good {
    background: var(--success);
    color: var(--bg);
}

.injury-status.caution {
    background: var(--warning);
    color: var(--bg);
}

.injury-status.warning {
    background: #f97316;
    color: white;
}

.injury-status.danger {
    background: var(--error);
    color: white;
}

.injury-message {
    font-size: 13px;
    color: var(--text);
    margin-bottom: 12px;
    line-height: 1.4;
}

.injury-details {
    display: flex;
    gap: 16px;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
}

.injury-stat {
    text-align: center;
}

.injury-stat .stat-value {
    display: block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 18px;
    font-weight: 700;
    color: var(--accent);
}

.injury-stat .stat-label {
    font-size: 10px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.injury-avoid {
    font-size: 12px;
    color: var(--error);
    margin-bottom: 10px;
}

.injury-exercises {
    font-size: 12px;
    color: var(--text);
}

.injury-exercises ul {
    margin: 8px 0 0 0;
    padding-left: 16px;
}

.injury-exercises li {
    margin-bottom: 4px;
    color: var(--text-muted);
}

.injury-exercises li strong {
    color: var(--text);
}

/* Pain Drill-Down Styles - Clean and minimal */
.pain-step {
    margin-bottom: 16px;
}

.pain-label {
    font-size: 10px;
    color: var(--text-dim);
    font-weight: 600;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    letter-spacing: 0.05em;
}

.back-btn {
    font-size: 11px;
    color: var(--text-muted);
    cursor: pointer;
}

.pain-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* Likely Injury Display - Subtle, not alarming */
#likely-injury {
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-top: 16px;
}

.injury-match {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.injury-name {
    font-weight: 600;
    font-size: 15px;
    color: var(--text);
}

.injury-confidence {
    font-size: 11px;
    color: var(--text-dim);
}

.injury-advice {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 12px;
}

.injury-symptoms ul {
    margin: 8px 0 12px 16px;
    padding: 0;
}

.injury-symptoms li {
    margin: 4px 0;
    font-size: 12px;
    color: var(--text-muted);
}

.injury-note {
    font-size: 12px;
    color: var(--error);
    font-weight: 500;
    margin-bottom: 12px;
}

.confirm-injury-btn {
    width: 100%;
    padding: 12px;
    background: var(--surface-3);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 8px;
    font-weight: 500;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.confirm-injury-btn:active {
    background: var(--text);
    color: var(--bg);
}

/* Selected Pains Display */
.logged-pains {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 12px;
}

.logged-pain-item {
    display: flex;
    align-items: center;
    gap: 6px;
    background: var(--surface-3);
    border: 1px solid var(--border);
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 12px;
    color: var(--text);
}

.remove-pain {
    background: none;
    border: none;
    color: var(--text-muted);
    font-size: 14px;
    cursor: pointer;
    padding: 0 2px;
    line-height: 1;
}

.pain-count {
    color: var(--text);
    font-weight: 500;
}

/* Daily Recovery Exercises */
.recovery-exercises-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.recovery-exercise-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.15s;
}

.recovery-exercise-item.completed {
    border-color: var(--success);
    background: rgba(34, 197, 94, 0.1);
}

.recovery-exercise-item.completed .recovery-check {
    background: var(--success);
}

.recovery-exercise-item.completed .recovery-check svg {
    opacity: 1;
}

.recovery-exercise-item.completed .recovery-name {
    text-decoration: line-through;
    opacity: 0.7;
}

.recovery-check {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--surface-2);
    border: 2px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
}

.recovery-check svg {
    width: 14px;
    height: 14px;
    stroke: white;
    opacity: 0;
}

.recovery-info {
    flex: 1;
    min-width: 0;
}

.recovery-name {
    font-weight: 600;
    font-size: 14px;
    color: var(--text);
    margin-bottom: 4px;
}

.recovery-desc {
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.4;
    margin-bottom: 4px;
}

.recovery-freq {
    font-size: 10px;
    color: var(--accent);
    font-weight: 600;
}

.recovery-xp {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    color: var(--accent);
    font-weight: 600;
}

.recovery-progress {
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 12px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
}

.recovery-complete-bonus {
    text-align: center;
    font-size: 13px;
    color: var(--success);
    font-weight: 600;
    margin-top: 12px;
    padding: 10px;
    background: rgba(34, 197, 94, 0.1);
    border-radius: 8px;
}

